<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Distribution.Simple.Register</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Distribution-Simple-Register.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Distribution-Simple-Register.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Cabal-1.24.2.0: A framework for packaging Haskell software</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Isaac Jones 2003-2004</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>cabal-devel@haskell.org</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Distribution.Simple.Register</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module deals with registering and unregistering packages. There are a
 couple ways it can do this, one is to do it directly. Another is to generate
 a script that can be run later to do it. The idea here being that the user
 is shielded from the details of what command to use for package registration
 for a particular compiler. In practice this aspect was not especially
 popular so we also provide a way to simply generate the package registration
 file which then must be manually passed to <code>ghc-pkg</code>. It is possible to
 generate registration information for where the package is to be installed,
 or alternatively to register the package in place in the build tree. The
 latter is occasionally handy, and will become more important when we try to
 build multi-package systems.</p><p>This module does not delegate anything to the per-compiler modules but just
 mixes it all in in this module, which is rather unsatisfactory. The script
 generation and the unregister feature are not well used or tested.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:register">register</a> :: <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-Setup.html#t:RegisterFlags">RegisterFlags</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:unregister">unregister</a> :: <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-Setup.html#t:RegisterFlags">RegisterFlags</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:initPackageDB">initPackageDB</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:doesPackageDBExist">doesPackageDBExist</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:createPackageDB">createPackageDB</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:deletePackageDB">deletePackageDB</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:invokeHcPkg">invokeHcPkg</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack">PackageDBStack</a> -&gt; [<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>] -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:registerPackage">registerPackage</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack">PackageDBStack</a> -&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:generateRegistrationInfo">generateRegistrationInfo</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><a href="#v:inplaceInstalledPackageInfo">inplaceInstalledPackageInfo</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Package.html#t:AbiHash">AbiHash</a> -&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><a href="#v:absoluteInstalledPackageInfo">absoluteInstalledPackageInfo</a> :: <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Package.html#t:AbiHash">AbiHash</a> -&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><a href="#v:generalInstalledPackageInfo">generalInstalledPackageInfo</a> :: ([<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; [<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>]) -&gt; <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Package.html#t:AbiHash">AbiHash</a> -&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; <a href="Distribution-Simple-InstallDirs.html#t:InstallDirs">InstallDirs</a> <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:register" class="def">register</a> <a href="src/Distribution-Simple-Register.html#register" class="link">Source</a> <a href="#v:register" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Setup.html#t:RegisterFlags">RegisterFlags</a></td><td class="doc"><p>Install in the user's database?; verbose</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:unregister" class="def">unregister</a> :: <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-Setup.html#t:RegisterFlags">RegisterFlags</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Distribution-Simple-Register.html#unregister" class="link">Source</a> <a href="#v:unregister" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:initPackageDB" class="def">initPackageDB</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Distribution-Simple-Register.html#initPackageDB" class="link">Source</a> <a href="#v:initPackageDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:doesPackageDBExist" class="def">doesPackageDBExist</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Distribution-Simple-Register.html#doesPackageDBExist" class="link">Source</a> <a href="#v:doesPackageDBExist" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:createPackageDB" class="def">createPackageDB</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Distribution-Simple-Register.html#createPackageDB" class="link">Source</a> <a href="#v:createPackageDB" class="selflink">#</a></p><div class="doc"><p>Create an empty package DB at the specified location.</p></div></div><div class="top"><p class="src"><a id="v:deletePackageDB" class="def">deletePackageDB</a> :: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Distribution-Simple-Register.html#deletePackageDB" class="link">Source</a> <a href="#v:deletePackageDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:invokeHcPkg" class="def">invokeHcPkg</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack">PackageDBStack</a> -&gt; [<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>] -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Distribution-Simple-Register.html#invokeHcPkg" class="link">Source</a> <a href="#v:invokeHcPkg" class="selflink">#</a></p><div class="doc"><p>Run <code>hc-pkg</code> using a given package DB stack, directly forwarding the
 provided command-line arguments to it.</p></div></div><div class="top"><p class="src"><a id="v:registerPackage" class="def">registerPackage</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Program.html#t:ProgramConfiguration">ProgramConfiguration</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack">PackageDBStack</a> -&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Distribution-Simple-Register.html#registerPackage" class="link">Source</a> <a href="#v:registerPackage" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:generateRegistrationInfo" class="def">generateRegistrationInfo</a> :: <a href="Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="src/Distribution-Simple-Register.html#generateRegistrationInfo" class="link">Source</a> <a href="#v:generateRegistrationInfo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:inplaceInstalledPackageInfo" class="def">inplaceInstalledPackageInfo</a> <a href="src/Distribution-Simple-Register.html#inplaceInstalledPackageInfo" class="link">Source</a> <a href="#v:inplaceInstalledPackageInfo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>top of the build tree</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>location of the dist tree</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Package.html#t:AbiHash">AbiHash</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Construct <code><a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></code> for a library that is in place in the
 build tree.</p><p>This function knows about the layout of in place packages.</p></div></div><div class="top"><p class="src"><a id="v:absoluteInstalledPackageInfo" class="def">absoluteInstalledPackageInfo</a> :: <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Package.html#t:AbiHash">AbiHash</a> -&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> <a href="src/Distribution-Simple-Register.html#absoluteInstalledPackageInfo" class="link">Source</a> <a href="#v:absoluteInstalledPackageInfo" class="selflink">#</a></p><div class="doc"><p>Construct <code><a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></code> for the final install location of a
 library package.</p><p>This function knows about the layout of installed packages.</p></div></div><div class="top"><p class="src"><a id="v:generalInstalledPackageInfo" class="def">generalInstalledPackageInfo</a> <a href="src/Distribution-Simple-Register.html#generalInstalledPackageInfo" class="link">Source</a> <a href="#v:generalInstalledPackageInfo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ([<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; [<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>])</td><td class="doc"><p>Translate relative include dir paths to
 absolute paths.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Package.html#t:AbiHash">AbiHash</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-PackageDescription.html#t:Library">Library</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-LocalBuildInfo.html#t:ComponentLocalBuildInfo">ComponentLocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-InstallDirs.html#t:InstallDirs">InstallDirs</a> <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Construct <code><a href="Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></code> for a library in a package, given a set
 of installation directories.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>