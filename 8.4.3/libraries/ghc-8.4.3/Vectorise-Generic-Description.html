<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Vectorise.Generic.Description</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Vectorise.Generic.Description.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.4.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Vectorise.Generic.Description</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Compute a description of the generic representation that we use for a user defined data type.</p><p>During vectorisation, we generate a PRepr and PA instance for each user defined
 data type. The PA dictionary contains methods to convert the user type to and
 from our generic representation. This module computes a description of what
 that generic representation is.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:CompRepr">CompRepr</a><ul class="subs"><li>= <a href="#v:Keep">Keep</a> <a href="Type.html#t:Type" title="Type">Type</a> <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></li><li>| <a href="#v:Wrap">Wrap</a> <a href="Type.html#t:Type" title="Type">Type</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ProdRepr">ProdRepr</a><ul class="subs"><li>= <a href="#v:EmptyProd">EmptyProd</a></li><li>| <a href="#v:UnaryProd">UnaryProd</a> <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a></li><li>| <a href="#v:Prod">Prod</a> { <ul class="subs"><li><a href="#v:repr_tup_tc">repr_tup_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:repr_ptup_tc">repr_ptup_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:repr_ptups_tc">repr_ptups_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:repr_comp_tys">repr_comp_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</li><li><a href="#v:repr_comps">repr_comps</a> :: [<a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a>]</li></ul> }</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConRepr">ConRepr</a> = <a href="#v:ConRepr">ConRepr</a> {<ul class="subs"><li><a href="#v:repr_dc">repr_dc</a> :: <a href="DataCon.html#t:DataCon" title="DataCon">DataCon</a></li><li><a href="#v:repr_prod">repr_prod</a> :: <a href="Vectorise-Generic-Description.html#t:ProdRepr" title="Vectorise.Generic.Description">ProdRepr</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:SumRepr">SumRepr</a><ul class="subs"><li>= <a href="#v:EmptySum">EmptySum</a></li><li>| <a href="#v:UnarySum">UnarySum</a> <a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a></li><li>| <a href="#v:Sum">Sum</a> { <ul class="subs"><li><a href="#v:repr_sum_tc">repr_sum_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:repr_psum_tc">repr_psum_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:repr_psums_tc">repr_psums_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:repr_sel_ty">repr_sel_ty</a> :: <a href="Type.html#t:Type" title="Type">Type</a></li><li><a href="#v:repr_sels_ty">repr_sels_ty</a> :: <a href="Type.html#t:Type" title="Type">Type</a></li><li><a href="#v:repr_selsLength_v">repr_selsLength_v</a> :: <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></li><li><a href="#v:repr_con_tys">repr_con_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</li><li><a href="#v:repr_cons">repr_cons</a> :: [<a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a>]</li></ul> }</li></ul></li><li class="src short"><a href="#v:tyConRepr">tyConRepr</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM" title="Vectorise.Monad.Base">VM</a> <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a></li><li class="src short"><a href="#v:sumReprType">sumReprType</a> :: <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM" title="Vectorise.Monad.Base">VM</a> <a href="Type.html#t:Type" title="Type">Type</a></li><li class="src short"><a href="#v:compOrigType">compOrigType</a> :: <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CompRepr" class="def">CompRepr</a> <a href="src/Vectorise.Generic.Description.html#CompRepr" class="link">Source</a> <a href="#t:CompRepr" class="selflink">#</a></p><div class="doc"><p>Describes the representation type of a data constructor field.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Keep" class="def">Keep</a> <a href="Type.html#t:Type" title="Type">Type</a> <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Wrap" class="def">Wrap</a> <a href="Type.html#t:Type" title="Type">Type</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:CompRepr" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CompRepr:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a></span> <a href="src/Vectorise.Generic.Description.html#line-264" class="link">Source</a> <a href="#t:CompRepr" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CompRepr:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Vectorise-Generic-Description.html">Vectorise.Generic.Description</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.11.1.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ProdRepr" class="def">ProdRepr</a> <a href="src/Vectorise.Generic.Description.html#ProdRepr" class="link">Source</a> <a href="#t:ProdRepr" class="selflink">#</a></p><div class="doc"><p>Describes the representation type of the fields / components of a constructor.
   If the data constructor has multiple fields then we bundle them
   together into a generic product type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:EmptyProd" class="def">EmptyProd</a></td><td class="doc"><p>Data constructor has no fields.</p></td></tr><tr><td class="src"><a id="v:UnaryProd" class="def">UnaryProd</a> <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a></td><td class="doc"><p>Data constructor has a single field.</p></td></tr><tr><td class="src"><a id="v:Prod" class="def">Prod</a></td><td class="doc"><p>Data constructor has several fields.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:repr_tup_tc" class="def">repr_tup_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>Representation tycon for the product (eg Tuple2)</p></div></li><li><dfn class="src"><a id="v:repr_ptup_tc" class="def">repr_ptup_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>PData  version of the product tycon  (eg PDataTuple2)</p></div></li><li><dfn class="src"><a id="v:repr_ptups_tc" class="def">repr_ptups_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>PDatas version of the product tycon  (eg PDatasTuple2s)
   Not all lifted backends use <code>PDatas</code>.</p></div></li><li><dfn class="src"><a id="v:repr_comp_tys" class="def">repr_comp_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</dfn><div class="doc"><p>Types of each field.</p></div></li><li><dfn class="src"><a id="v:repr_comps" class="def">repr_comps</a> :: [<a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a>]</dfn><div class="doc"><p>Generic representation types for each field.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ProdRepr" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProdRepr:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="Vectorise-Generic-Description.html#t:ProdRepr" title="Vectorise.Generic.Description">ProdRepr</a></span> <a href="src/Vectorise.Generic.Description.html#line-251" class="link">Source</a> <a href="#t:ProdRepr" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProdRepr:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Vectorise-Generic-Description.html">Vectorise.Generic.Description</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Vectorise-Generic-Description.html#t:ProdRepr" title="Vectorise.Generic.Description">ProdRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.11.1.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Vectorise-Generic-Description.html#t:ProdRepr" title="Vectorise.Generic.Description">ProdRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConRepr" class="def">ConRepr</a> <a href="src/Vectorise.Generic.Description.html#ConRepr" class="link">Source</a> <a href="#t:ConRepr" class="selflink">#</a></p><div class="doc"><p>Describes the representation type of a data constructor.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ConRepr" class="def">ConRepr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:repr_dc" class="def">repr_dc</a> :: <a href="DataCon.html#t:DataCon" title="DataCon">DataCon</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:repr_prod" class="def">repr_prod</a> :: <a href="Vectorise-Generic-Description.html#t:ProdRepr" title="Vectorise.Generic.Description">ProdRepr</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ConRepr" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConRepr:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a></span> <a href="src/Vectorise.Generic.Description.html#line-244" class="link">Source</a> <a href="#t:ConRepr" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConRepr:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Vectorise-Generic-Description.html">Vectorise.Generic.Description</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.11.1.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SumRepr" class="def">SumRepr</a> <a href="src/Vectorise.Generic.Description.html#SumRepr" class="link">Source</a> <a href="#t:SumRepr" class="selflink">#</a></p><div class="doc"><p>Describes the generic representation of a data type.
   If the data type has multiple constructors then we bundle them
   together into a generic sum type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:EmptySum" class="def">EmptySum</a></td><td class="doc"><p>Data type has no data constructors.</p></td></tr><tr><td class="src"><a id="v:UnarySum" class="def">UnarySum</a> <a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a></td><td class="doc"><p>Data type has a single constructor.</p></td></tr><tr><td class="src"><a id="v:Sum" class="def">Sum</a></td><td class="doc"><p>Data type has multiple constructors.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:repr_sum_tc" class="def">repr_sum_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>Representation tycon for the sum (eg Sum2)</p></div></li><li><dfn class="src"><a id="v:repr_psum_tc" class="def">repr_psum_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>PData version of the sum tycon     (eg PDataSum2)
   This TyCon doesn't appear explicitly in the source program.
   See Note [PData TyCons].</p></div></li><li><dfn class="src"><a id="v:repr_psums_tc" class="def">repr_psums_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>PDatas version of the sum tycon    (eg PDatasSum2)</p></div></li><li><dfn class="src"><a id="v:repr_sel_ty" class="def">repr_sel_ty</a> :: <a href="Type.html#t:Type" title="Type">Type</a></dfn><div class="doc"><p>Type of the selector               (eg Sel2)</p></div></li><li><dfn class="src"><a id="v:repr_sels_ty" class="def">repr_sels_ty</a> :: <a href="Type.html#t:Type" title="Type">Type</a></dfn><div class="doc"><p>Type of multi-selector             (eg Sel2s)</p></div></li><li><dfn class="src"><a id="v:repr_selsLength_v" class="def">repr_selsLength_v</a> :: <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></dfn><div class="doc"><p>Function to get the length of a Sels of this type.</p></div></li><li><dfn class="src"><a id="v:repr_con_tys" class="def">repr_con_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</dfn><div class="doc"><p>Type of each data constructor.</p></div></li><li><dfn class="src"><a id="v:repr_cons" class="def">repr_cons</a> :: [<a href="Vectorise-Generic-Description.html#t:ConRepr" title="Vectorise.Generic.Description">ConRepr</a>]</dfn><div class="doc"><p>Generic representation types of each data constructor.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:SumRepr" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SumRepr:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a></span> <a href="src/Vectorise.Generic.Description.html#line-223" class="link">Source</a> <a href="#t:SumRepr" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SumRepr:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Vectorise-Generic-Description.html">Vectorise.Generic.Description</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.11.1.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:tyConRepr" class="def">tyConRepr</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM" title="Vectorise.Monad.Base">VM</a> <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a> <a href="src/Vectorise.Generic.Description.html#tyConRepr" class="link">Source</a> <a href="#v:tyConRepr" class="selflink">#</a></p><div class="doc"><p>Determine the generic representation of a data type, given its tycon.</p></div></div><div class="top"><p class="src"><a id="v:sumReprType" class="def">sumReprType</a> :: <a href="Vectorise-Generic-Description.html#t:SumRepr" title="Vectorise.Generic.Description">SumRepr</a> -&gt; <a href="Vectorise-Monad-Base.html#t:VM" title="Vectorise.Monad.Base">VM</a> <a href="Type.html#t:Type" title="Type">Type</a> <a href="src/Vectorise.Generic.Description.html#sumReprType" class="link">Source</a> <a href="#v:sumReprType" class="selflink">#</a></p><div class="doc"><p>Yield the type of this sum representation.</p></div></div><div class="top"><p class="src"><a id="v:compOrigType" class="def">compOrigType</a> :: <a href="Vectorise-Generic-Description.html#t:CompRepr" title="Vectorise.Generic.Description">CompRepr</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> <a href="src/Vectorise.Generic.Description.html#compOrigType" class="link">Source</a> <a href="#v:compOrigType" class="selflink">#</a></p><div class="doc"><p>Yield the original component type of a data constructor component representation.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.20.0</p></div></body></html>