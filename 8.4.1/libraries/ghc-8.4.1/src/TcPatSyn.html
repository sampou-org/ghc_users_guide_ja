<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

\section[TcPatSyn]{Typechecking pattern synonym declarations}
-}</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><a name="line-9"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-10"></a><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><a name="line-11"></a><span>
</span><a name="line-12"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">TcPatSyn</span><span> </span><span class="hs-special">(</span><span> </span><a href="TcPatSyn.html#tcInferPatSynDecl"><span class="hs-identifier hs-var">tcInferPatSynDecl</span></a><span class="hs-special">,</span><span> </span><a href="TcPatSyn.html#tcCheckPatSynDecl"><span class="hs-identifier hs-var">tcCheckPatSynDecl</span></a><span>
</span><a name="line-13"></a><span>                </span><span class="hs-special">,</span><span> </span><a href="TcPatSyn.html#tcPatSynBuilderBind"><span class="hs-identifier hs-var">tcPatSynBuilderBind</span></a><span class="hs-special">,</span><span> </span><a href="TcPatSyn.html#tcPatSynBuilderOcc"><span class="hs-identifier hs-var">tcPatSynBuilderOcc</span></a><span class="hs-special">,</span><span> </span><a href="TcPatSyn.html#nonBidirectionalErr"><span class="hs-identifier hs-var">nonBidirectionalErr</span></a><span>
</span><a name="line-14"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-15"></a><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><a href="GhcPrelude.html"><span class="hs-identifier">GhcPrelude</span></a><span>
</span><a name="line-17"></a><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><a href="HsSyn.html"><span class="hs-identifier">HsSyn</span></a><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><a href="TcPat.html"><span class="hs-identifier">TcPat</span></a><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><a href="Type.html"><span class="hs-identifier">Type</span></a><span class="hs-special">(</span><span> </span><a href="TyCoRep.html#mkEmptyTCvSubst"><span class="hs-identifier hs-var">mkEmptyTCvSubst</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#tidyTyVarBinders"><span class="hs-identifier hs-var">tidyTyVarBinders</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#tidyType"><span class="hs-identifier hs-var">tidyType</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><a href="TcRnMonad.html"><span class="hs-identifier">TcRnMonad</span></a><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><a href="TcSigs.html"><span class="hs-identifier">TcSigs</span></a><span class="hs-special">(</span><span> </span><a href="TcSigs.html#emptyPragEnv"><span class="hs-identifier hs-var">emptyPragEnv</span></a><span class="hs-special">,</span><span> </span><a href="TcSigs.html#completeSigFromId"><span class="hs-identifier hs-var">completeSigFromId</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><a href="TcType.html"><span class="hs-identifier">TcType</span></a><span class="hs-special">(</span><span> </span><a href="TcType.html#mkMinimalBySCs"><span class="hs-identifier hs-var">mkMinimalBySCs</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><a href="TcEnv.html"><span class="hs-identifier">TcEnv</span></a><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><a href="TcMType.html"><span class="hs-identifier">TcMType</span></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><a href="TcHsSyn.html"><span class="hs-identifier">TcHsSyn</span></a><span class="hs-special">(</span><span> </span><a href="TcHsSyn.html#zonkTyVarBindersX"><span class="hs-identifier hs-var">zonkTyVarBindersX</span></a><span class="hs-special">,</span><span> </span><a href="TcHsSyn.html#zonkTcTypeToTypes"><span class="hs-identifier hs-var">zonkTcTypeToTypes</span></a><span>
</span><a name="line-27"></a><span>              </span><span class="hs-special">,</span><span> </span><a href="TcHsSyn.html#zonkTcTypeToType"><span class="hs-identifier hs-var">zonkTcTypeToType</span></a><span class="hs-special">,</span><span> </span><a href="TcHsSyn.html#emptyZonkEnv"><span class="hs-identifier hs-var">emptyZonkEnv</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="TysPrim.html"><span class="hs-identifier">TysPrim</span></a><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="TysWiredIn.html"><span class="hs-identifier">TysWiredIn</span></a><span>  </span><span class="hs-special">(</span><span> </span><a href="TysWiredIn.html#runtimeRepTy"><span class="hs-identifier hs-var">runtimeRepTy</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="Name.html"><span class="hs-identifier">Name</span></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="SrcLoc.html"><span class="hs-identifier">SrcLoc</span></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="PatSyn.html"><span class="hs-identifier">PatSyn</span></a><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="NameSet.html"><span class="hs-identifier">NameSet</span></a><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><a href="Panic.html"><span class="hs-identifier">Panic</span></a><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><a href="Outputable.html"><span class="hs-identifier">Outputable</span></a><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><a href="FastString.html"><span class="hs-identifier">FastString</span></a><span>
</span><a name="line-37"></a><span class="hs-keyword">import</span><span> </span><a href="Var.html"><span class="hs-identifier">Var</span></a><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span> </span><a href="VarEnv.html"><span class="hs-identifier">VarEnv</span></a><span class="hs-special">(</span><span> </span><a href="VarEnv.html#emptyTidyEnv"><span class="hs-identifier hs-var">emptyTidyEnv</span></a><span class="hs-special">,</span><span> </span><a href="VarEnv.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><a href="Id.html"><span class="hs-identifier">Id</span></a><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span> </span><a href="IdInfo.html"><span class="hs-identifier">IdInfo</span></a><span class="hs-special">(</span><span> </span><a href="IdInfo.html#RecSelParent"><span class="hs-identifier hs-type">RecSelParent</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="IdInfo.html#setLevityInfoWithType"><span class="hs-identifier hs-var">setLevityInfoWithType</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-41"></a><span class="hs-keyword">import</span><span> </span><a href="TcBinds.html"><span class="hs-identifier">TcBinds</span></a><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span> </span><a href="BasicTypes.html"><span class="hs-identifier">BasicTypes</span></a><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span> </span><a href="TcSimplify.html"><span class="hs-identifier">TcSimplify</span></a><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span> </span><a href="TcUnify.html"><span class="hs-identifier">TcUnify</span></a><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span> </span><a href="TcType.html"><span class="hs-identifier">TcType</span></a><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span> </span><a href="TcEvidence.html"><span class="hs-identifier">TcEvidence</span></a><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><a href="BuildTyCl.html"><span class="hs-identifier">BuildTyCl</span></a><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span> </span><a href="VarSet.html"><span class="hs-identifier">VarSet</span></a><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><a href="MkId.html"><span class="hs-identifier">MkId</span></a><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><a href="TcTyDecls.html"><span class="hs-identifier">TcTyDecls</span></a><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span> </span><a href="ConLike.html"><span class="hs-identifier">ConLike</span></a><span>
</span><a name="line-52"></a><span class="hs-keyword">import</span><span> </span><a href="FieldLabel.html"><span class="hs-identifier">FieldLabel</span></a><span>
</span><a name="line-53"></a><span class="hs-keyword">import</span><span> </span><a href="Bag.html"><span class="hs-identifier">Bag</span></a><span>
</span><a name="line-54"></a><span class="hs-keyword">import</span><span> </span><a href="Util.html"><span class="hs-identifier">Util</span></a><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><a href="ErrUtils.html"><span class="hs-identifier">ErrUtils</span></a><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a><span> </span><span class="hs-special">(</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Control.Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.List.html"><span class="hs-identifier">Data.List</span></a><span class="hs-special">(</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span class="hs-cpp">#include &quot;HsVersions.h&quot;
</span><span>
</span><a name="line-61"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    Type checking a pattern synonym
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-68"></a><span>
</span><a name="line-69"></a><span class="hs-identifier">tcInferPatSynDecl</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span>
</span><a name="line-70"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="HsBinds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">,</span><span> </span><a href="TcRnTypes.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a><span class="hs-special">)</span><span>
</span><a name="line-71"></a><a name="tcInferPatSynDecl"><a href="TcPatSyn.html#tcInferPatSynDecl"><span class="hs-identifier">tcInferPatSynDecl</span></a></a><span> </span><a href="HsBinds.html#PSB"><span class="hs-identifier hs-var">PSB</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">psb_id</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224747"><a href="#local-6989586621680224747"><span class="hs-identifier">lname</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680224748"><a href="#local-6989586621680224748"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_args</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224749"><a href="#local-6989586621680224749"><span class="hs-identifier">details</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-72"></a><span>                       </span><span class="hs-identifier">psb_def</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224750"><a href="#local-6989586621680224750"><span class="hs-identifier">lpat</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_dir</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224751"><a href="#local-6989586621680224751"><span class="hs-identifier">dir</span></a></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-73"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#addPatSynCtxt"><span class="hs-identifier hs-var">addPatSynCtxt</span></a><span> </span><a href="#local-6989586621680224747"><span class="hs-identifier hs-var">lname</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-74"></a><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcInferPatSynDecl {&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224748"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-75"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcPatSyn.html#tcCheckPatSynPat"><span class="hs-identifier hs-var">tcCheckPatSynPat</span></a><span> </span><a href="#local-6989586621680224750"><span class="hs-identifier hs-var">lpat</span></a><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224752"><a href="#local-6989586621680224752"><span class="hs-identifier">arg_names</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224753"><a href="#local-6989586621680224753"><span class="hs-identifier">rec_fields</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224754"><a href="#local-6989586621680224754"><span class="hs-identifier">is_infix</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-var">collectPatSynArgInfo</span></a><span> </span><a href="#local-6989586621680224749"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-78"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224756"><a href="#local-6989586621680224756"><span class="hs-identifier">tclvl</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224757"><a href="#local-6989586621680224757"><span class="hs-identifier">wanted</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a name="local-6989586621680224758"><a href="#local-6989586621680224758"><span class="hs-identifier">lpat'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224759"><a href="#local-6989586621680224759"><span class="hs-identifier">args</span></a></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a name="local-6989586621680224760"><a href="#local-6989586621680224760"><span class="hs-identifier">pat_ty</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-79"></a><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#pushLevelAndCaptureConstraints"><span class="hs-identifier hs-var">pushLevelAndCaptureConstraints</span></a><span>  </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-80"></a><span>               </span><a href="TcUnify.html#tcInferNoInst"><span class="hs-identifier hs-var">tcInferNoInst</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-6989586621680224755"><a href="#local-6989586621680224755"><span class="hs-identifier">exp_ty</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-81"></a><span>               </span><a href="TcPat.html#tcPat"><span class="hs-identifier hs-var">tcPat</span></a><span> </span><a href="HsExpr.html#PatSyn"><span class="hs-identifier hs-var">PatSyn</span></a><span> </span><a href="#local-6989586621680224750"><span class="hs-identifier hs-var">lpat</span></a><span> </span><a href="#local-6989586621680224755"><span class="hs-identifier hs-var">exp_ty</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-82"></a><span>               </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcEnv.html#tcLookupId"><span class="hs-identifier hs-var">tcLookupId</span></a><span> </span><a href="#local-6989586621680224752"><span class="hs-identifier hs-var">arg_names</span></a><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224761"><a href="#local-6989586621680224761"><span class="hs-identifier">named_taus</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224748"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224760"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">:</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621680224762"><a href="#local-6989586621680224762"><span class="hs-identifier">arg</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Name.html#getName"><span class="hs-identifier hs-var">getName</span></a><span> </span><a href="#local-6989586621680224762"><span class="hs-identifier hs-var">arg</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">varType</span><span> </span><a href="#local-6989586621680224762"><span class="hs-identifier hs-var">arg</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224759"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224763"><a href="#local-6989586621680224763"><span class="hs-identifier">qtvs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224764"><a href="#local-6989586621680224764"><span class="hs-identifier">req_dicts</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224765"><a href="#local-6989586621680224765"><span class="hs-identifier">ev_binds</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcSimplify.html#simplifyInfer"><span class="hs-identifier hs-var">simplifyInfer</span></a><span> </span><a href="#local-6989586621680224756"><span class="hs-identifier hs-var">tclvl</span></a><span> </span><a href="TcSimplify.html#NoRestrictions"><span class="hs-identifier hs-var">NoRestrictions</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-87"></a><span>                                                         </span><a href="#local-6989586621680224761"><span class="hs-identifier hs-var">named_taus</span></a><span> </span><a href="#local-6989586621680224757"><span class="hs-identifier hs-var">wanted</span></a><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224766"><a href="#local-6989586621680224766"><span class="hs-identifier">ex_tvs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224767"><a href="#local-6989586621680224767"><span class="hs-identifier">prov_dicts</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#tcCollectEx"><span class="hs-identifier hs-var">tcCollectEx</span></a><span> </span><a href="#local-6989586621680224758"><span class="hs-identifier hs-var">lpat'</span></a><span>
</span><a name="line-90"></a><span>             </span><a name="local-6989586621680224768"><a href="#local-6989586621680224768"><span class="hs-identifier">ex_tv_set</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a><span> </span><a href="#local-6989586621680224766"><span class="hs-identifier hs-var">ex_tvs</span></a><span>
</span><a name="line-91"></a><span>             </span><a name="local-6989586621680224769"><a href="#local-6989586621680224769"><span class="hs-identifier">univ_tvs</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Util.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">`</span><a href="VarSet.html#elemVarSet"><span class="hs-identifier hs-var">elemVarSet</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621680224768"><span class="hs-identifier hs-var">ex_tv_set</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224763"><span class="hs-identifier hs-var">qtvs</span></a><span>
</span><a name="line-92"></a><span>             </span><a name="local-6989586621680224770"><a href="#local-6989586621680224770"><span class="hs-identifier">req_theta</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a><span> </span><a href="#local-6989586621680224764"><span class="hs-identifier hs-var">req_dicts</span></a><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224771"><a href="#local-6989586621680224771"><span class="hs-identifier">prov_dicts</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcMType.html#zonkId"><span class="hs-identifier hs-var">zonkId</span></a><span> </span><a href="#local-6989586621680224767"><span class="hs-identifier hs-var">prov_dicts</span></a><span>
</span><a name="line-95"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224772"><a href="#local-6989586621680224772"><span class="hs-identifier">filtered_prov_dicts</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcType.html#mkMinimalBySCs"><span class="hs-identifier hs-var">mkMinimalBySCs</span></a><span> </span><a href="TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a><span> </span><a href="#local-6989586621680224771"><span class="hs-identifier hs-var">prov_dicts</span></a><span>
</span><a name="line-96"></a><span>             </span><a name="local-6989586621680224773"><a href="#local-6989586621680224773"><span class="hs-identifier">prov_theta</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a><span> </span><a href="#local-6989586621680224772"><span class="hs-identifier hs-var">filtered_prov_dicts</span></a><span>
</span><a name="line-97"></a><span>             </span><span class="hs-comment">-- Filtering: see Note [Remove redundant provided dicts]</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcInferPatSynDecl }&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224748"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224766"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">)</span><span>
</span><a name="line-100"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcPatSyn.html#tc_patsyn_finish"><span class="hs-identifier hs-var">tc_patsyn_finish</span></a><span> </span><a href="#local-6989586621680224747"><span class="hs-identifier hs-var">lname</span></a><span> </span><a href="#local-6989586621680224751"><span class="hs-identifier hs-var">dir</span></a><span> </span><a href="#local-6989586621680224754"><span class="hs-identifier hs-var">is_infix</span></a><span> </span><a href="#local-6989586621680224758"><span class="hs-identifier hs-var">lpat'</span></a><span>
</span><a name="line-101"></a><span>                          </span><span class="hs-special">(</span><a href="Var.html#mkTyVarBinders"><span class="hs-identifier hs-var">mkTyVarBinders</span></a><span> </span><a href="Var.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a><span> </span><a href="#local-6989586621680224769"><span class="hs-identifier hs-var">univ_tvs</span></a><span>
</span><a name="line-102"></a><span>                            </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224770"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">,</span><span>  </span><a href="#local-6989586621680224765"><span class="hs-identifier hs-var">ev_binds</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224764"><span class="hs-identifier hs-var">req_dicts</span></a><span class="hs-special">)</span><span>
</span><a name="line-103"></a><span>                          </span><span class="hs-special">(</span><a href="Var.html#mkTyVarBinders"><span class="hs-identifier hs-var">mkTyVarBinders</span></a><span> </span><a href="Var.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a><span> </span><a href="#local-6989586621680224766"><span class="hs-identifier hs-var">ex_tvs</span></a><span>
</span><a name="line-104"></a><span>                            </span><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#mkTyVarTys"><span class="hs-identifier hs-var">mkTyVarTys</span></a><span> </span><a href="#local-6989586621680224766"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224773"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="TcEvidence.html#EvId"><span class="hs-identifier hs-var">EvId</span></a><span> </span><a href="#local-6989586621680224772"><span class="hs-identifier hs-var">filtered_prov_dicts</span></a><span class="hs-special">)</span><span>
</span><a name="line-105"></a><span>                          </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="HsUtils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a><span> </span><a href="#local-6989586621680224759"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="Id.html#idType"><span class="hs-identifier hs-var">idType</span></a><span> </span><a href="#local-6989586621680224759"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">)</span><span>
</span><a name="line-106"></a><span>                          </span><a href="#local-6989586621680224760"><span class="hs-identifier hs-var">pat_ty</span></a><span> </span><a href="#local-6989586621680224753"><span class="hs-identifier hs-var">rec_fields</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span class="hs-comment">{- Note [Remove redundant provided dicts]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Recall that
   HRefl :: forall k1 k2 (a1:k1) (a2:k2). (k1 ~ k2, a1 ~ a2)
                                       =&gt; a1 :~~: a2
(NB: technically the (k1~k2) existential dictionary is not necessary,
but it's there at the moment.)

Now consider (Trac #14394):
   pattern Foo = HRefl
in a non-poly-kinded module.  We don't want to get
    pattern Foo :: () =&gt; (* ~ *, b ~ a) =&gt; a :~~: b
with that redundant (* ~ *).  We'd like to remove it; hence the call to
mkMinimalWithSCs.

Similarly consider
  data S a where { MkS :: Ord a =&gt; a -&gt; S a }
  pattern Bam x y &lt;- (MkS (x::a), MkS (y::a)))

The pattern (Bam x y) binds two (Ord a) dictionaries, but we only
need one.  Agian mkMimimalWithSCs removes the redundant one.
-}</span><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span class="hs-identifier">tcCheckPatSynDecl</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span>
</span><a name="line-132"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcPatSynInfo"><span class="hs-identifier hs-type">TcPatSynInfo</span></a><span>
</span><a name="line-133"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="HsBinds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">,</span><span> </span><a href="TcRnTypes.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a><span class="hs-special">)</span><span>
</span><a name="line-134"></a><a name="tcCheckPatSynDecl"><a href="TcPatSyn.html#tcCheckPatSynDecl"><span class="hs-identifier">tcCheckPatSynDecl</span></a></a><span> </span><a name="local-6989586621680224774"><a href="#local-6989586621680224774"><span class="hs-identifier">psb</span></a></a><span class="hs-glyph">@</span><a href="HsBinds.html#PSB"><span class="hs-identifier hs-var">PSB</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">psb_id</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224775"><a href="#local-6989586621680224775"><span class="hs-identifier">lname</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680224776"><a href="#local-6989586621680224776"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_args</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224777"><a href="#local-6989586621680224777"><span class="hs-identifier">details</span></a></a><span>
</span><a name="line-135"></a><span>                         </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_def</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224778"><a href="#local-6989586621680224778"><span class="hs-identifier">lpat</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_dir</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224779"><a href="#local-6989586621680224779"><span class="hs-identifier">dir</span></a></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-136"></a><span>                  </span><a href="TcRnTypes.html#TPSI"><span class="hs-identifier hs-var">TPSI</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">patsig_implicit_bndrs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224780"><a href="#local-6989586621680224780"><span class="hs-identifier">implicit_tvs</span></a></a><span>
</span><a name="line-137"></a><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">patsig_univ_bndrs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224781"><a href="#local-6989586621680224781"><span class="hs-identifier">explicit_univ_tvs</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">patsig_prov</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224782"><a href="#local-6989586621680224782"><span class="hs-identifier">prov_theta</span></a></a><span>
</span><a name="line-138"></a><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">patsig_ex_bndrs</span><span>   </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224783"><a href="#local-6989586621680224783"><span class="hs-identifier">explicit_ex_tvs</span></a></a><span class="hs-special">,</span><span>   </span><span class="hs-identifier">patsig_req</span><span>  </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224784"><a href="#local-6989586621680224784"><span class="hs-identifier">req_theta</span></a></a><span>
</span><a name="line-139"></a><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">patsig_body_ty</span><span>    </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224785"><a href="#local-6989586621680224785"><span class="hs-identifier">sig_body_ty</span></a></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-140"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#addPatSynCtxt"><span class="hs-identifier hs-var">addPatSynCtxt</span></a><span> </span><a href="#local-6989586621680224775"><span class="hs-identifier hs-var">lname</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-141"></a><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224792"><a href="#local-6989586621680224792"><span class="hs-identifier">decl_arity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a><span> </span><a href="#local-6989586621680224793"><span class="hs-identifier hs-var">arg_names</span></a><span>
</span><a name="line-142"></a><span>             </span><span class="hs-special">(</span><a name="local-6989586621680224793"><a href="#local-6989586621680224793"><span class="hs-identifier">arg_names</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224794"><a href="#local-6989586621680224794"><span class="hs-identifier">rec_fields</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224795"><a href="#local-6989586621680224795"><span class="hs-identifier">is_infix</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-var">collectPatSynArgInfo</span></a><span> </span><a href="#local-6989586621680224777"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-143"></a><span>
</span><a name="line-144"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcCheckPatSynDecl&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-145"></a><span>         </span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224780"><span class="hs-identifier hs-var">implicit_tvs</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224781"><span class="hs-identifier hs-var">explicit_univ_tvs</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224784"><span class="hs-identifier hs-var">req_theta</span></a><span>
</span><a name="line-146"></a><span>              </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224783"><span class="hs-identifier hs-var">explicit_ex_tvs</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224782"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224785"><span class="hs-identifier hs-var">sig_body_ty</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-147"></a><span>
</span><a name="line-148"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcPatSyn.html#tcCheckPatSynPat"><span class="hs-identifier hs-var">tcCheckPatSynPat</span></a><span> </span><a href="#local-6989586621680224778"><span class="hs-identifier hs-var">lpat</span></a><span>
</span><a name="line-149"></a><span>
</span><a name="line-150"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224798"><a href="#local-6989586621680224798"><span class="hs-identifier">arg_tys</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224799"><a href="#local-6989586621680224799"><span class="hs-identifier">pat_ty</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="TcType.html#tcSplitFunTysN"><span class="hs-identifier hs-var">tcSplitFunTysN</span></a><span> </span><a href="#local-6989586621680224792"><span class="hs-identifier hs-var">decl_arity</span></a><span> </span><a href="#local-6989586621680224785"><span class="hs-identifier hs-var">sig_body_ty</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-151"></a><span>                                 </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a><span> </span><a name="local-6989586621680224796"><a href="#local-6989586621680224796"><span class="hs-identifier">stuff</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-6989586621680224796"><span class="hs-identifier hs-var">stuff</span></a><span>
</span><a name="line-152"></a><span>                                 </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a><span> </span><a name="local-6989586621680224797"><a href="#local-6989586621680224797"><span class="hs-identifier">missing</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcPatSyn.html#wrongNumberOfParmsErr"><span class="hs-identifier hs-var">wrongNumberOfParmsErr</span></a><span> </span><a href="#local-6989586621680224776"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-6989586621680224792"><span class="hs-identifier hs-var">decl_arity</span></a><span> </span><a href="#local-6989586621680224797"><span class="hs-identifier hs-var">missing</span></a><span>
</span><a name="line-153"></a><span>
</span><a name="line-154"></a><span>       </span><span class="hs-comment">-- Complain about:  pattern P :: () =&gt; forall x. x -&gt; P x</span><span>
</span><a name="line-155"></a><span>       </span><span class="hs-comment">-- The existential 'x' should not appear in the result type</span><span>
</span><a name="line-156"></a><span>       </span><span class="hs-comment">-- Can't check this until we know P's arity</span><span>
</span><a name="line-157"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224800"><a href="#local-6989586621680224800"><span class="hs-identifier">bad_tvs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">`</span><a href="VarSet.html#elemVarSet"><span class="hs-identifier hs-var">elemVarSet</span></a><span class="hs-special">`</span><span> </span><a href="TyCoRep.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a><span> </span><a href="#local-6989586621680224799"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224783"><span class="hs-identifier hs-var">explicit_ex_tvs</span></a><span>
</span><a name="line-158"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#checkTc"><span class="hs-identifier hs-var">checkTc</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><a href="#local-6989586621680224800"><span class="hs-identifier hs-var">bad_tvs</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-159"></a><span>         </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;The result type of the signature for&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224776"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a><span>
</span><a name="line-160"></a><span>                   </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;namely&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224799"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-161"></a><span>            </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;mentions existential type variable&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a><span> </span><a href="#local-6989586621680224800"><span class="hs-identifier hs-var">bad_tvs</span></a><span>
</span><a name="line-162"></a><span>               </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a><span> </span><a href="#local-6989586621680224800"><span class="hs-identifier hs-var">bad_tvs</span></a><span class="hs-special">)</span><span>
</span><a name="line-163"></a><span>
</span><a name="line-164"></a><span>         </span><span class="hs-comment">-- See Note [The pattern-synonym signature splitting rule]</span><span>
</span><a name="line-165"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224801"><a href="#local-6989586621680224801"><span class="hs-identifier">univ_fvs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#closeOverKinds"><span class="hs-identifier hs-var">closeOverKinds</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-166"></a><span>                        </span><span class="hs-special">(</span><a href="TyCoRep.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224799"><span class="hs-identifier hs-var">pat_ty</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621680224784"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><a href="VarSet.html#extendVarSetList"><span class="hs-identifier hs-var">extendVarSetList</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621680224781"><span class="hs-identifier hs-var">explicit_univ_tvs</span></a><span class="hs-special">)</span><span>
</span><a name="line-167"></a><span>             </span><span class="hs-special">(</span><a name="local-6989586621680224802"><a href="#local-6989586621680224802"><span class="hs-identifier">extra_univ</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224803"><a href="#local-6989586621680224803"><span class="hs-identifier">extra_ex</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">`</span><a href="VarSet.html#elemVarSet"><span class="hs-identifier hs-var">elemVarSet</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621680224801"><span class="hs-identifier hs-var">univ_fvs</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="Var.html#binderVar"><span class="hs-identifier hs-var">binderVar</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224780"><span class="hs-identifier hs-var">implicit_tvs</span></a><span>
</span><a name="line-168"></a><span>             </span><a name="local-6989586621680224804"><a href="#local-6989586621680224804"><span class="hs-identifier">univ_bndrs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224802"><span class="hs-identifier hs-var">extra_univ</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="Var.html#mkTyVarBinders"><span class="hs-identifier hs-var">mkTyVarBinders</span></a><span> </span><a href="Var.html#Specified"><span class="hs-identifier hs-var">Specified</span></a><span> </span><a href="#local-6989586621680224781"><span class="hs-identifier hs-var">explicit_univ_tvs</span></a><span>
</span><a name="line-169"></a><span>             </span><a name="local-6989586621680224805"><a href="#local-6989586621680224805"><span class="hs-identifier">ex_bndrs</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224803"><span class="hs-identifier hs-var">extra_ex</span></a><span>   </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="Var.html#mkTyVarBinders"><span class="hs-identifier hs-var">mkTyVarBinders</span></a><span> </span><a href="Var.html#Specified"><span class="hs-identifier hs-var">Specified</span></a><span> </span><a href="#local-6989586621680224783"><span class="hs-identifier hs-var">explicit_ex_tvs</span></a><span>
</span><a name="line-170"></a><span>             </span><a name="local-6989586621680224806"><a href="#local-6989586621680224806"><span class="hs-identifier">univ_tvs</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a><span> </span><a href="#local-6989586621680224804"><span class="hs-identifier hs-var">univ_bndrs</span></a><span>
</span><a name="line-171"></a><span>             </span><a name="local-6989586621680224807"><a href="#local-6989586621680224807"><span class="hs-identifier">ex_tvs</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a><span> </span><a href="#local-6989586621680224805"><span class="hs-identifier hs-var">ex_bndrs</span></a><span>
</span><a name="line-172"></a><span>
</span><a name="line-173"></a><span>       </span><span class="hs-comment">-- Right!  Let's check the pattern against the signature</span><span>
</span><a name="line-174"></a><span>       </span><span class="hs-comment">-- See Note [Checking against a pattern signature]</span><span>
</span><a name="line-175"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224808"><a href="#local-6989586621680224808"><span class="hs-identifier">req_dicts</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcMType.html#newEvVars"><span class="hs-identifier hs-var">newEvVars</span></a><span> </span><a href="#local-6989586621680224784"><span class="hs-identifier hs-var">req_theta</span></a><span>
</span><a name="line-176"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224818"><a href="#local-6989586621680224818"><span class="hs-identifier">tclvl</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224819"><a href="#local-6989586621680224819"><span class="hs-identifier">wanted</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224820"><a href="#local-6989586621680224820"><span class="hs-identifier">lpat'</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224821"><a href="#local-6989586621680224821"><span class="hs-identifier">ex_tvs'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224822"><a href="#local-6989586621680224822"><span class="hs-identifier">prov_dicts</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224823"><a href="#local-6989586621680224823"><span class="hs-identifier">args'</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-177"></a><span>           </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">equalLength</span><span> </span><span class="hs-identifier">arg_names</span><span> </span><span class="hs-identifier">arg_tys</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224793"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224798"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-6989586621680224798"><span class="hs-operator hs-var">$$</span></a><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">arg_names</span><span> </span><a href="Outputable.html#assertPprPanic"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#assertPprPanic"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-identifier">arg_tys</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-178"></a><span>           </span><a href="TcRnMonad.html#pushLevelAndCaptureConstraints"><span class="hs-identifier hs-var">pushLevelAndCaptureConstraints</span></a><span>            </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-179"></a><span>           </span><a href="TcEnv.html#tcExtendTyVarEnv"><span class="hs-identifier hs-var">tcExtendTyVarEnv</span></a><span> </span><a href="#local-6989586621680224806"><span class="hs-identifier hs-var">univ_tvs</span></a><span>                 </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-180"></a><span>           </span><a href="TcPat.html#tcPat"><span class="hs-identifier hs-var">tcPat</span></a><span> </span><a href="HsExpr.html#PatSyn"><span class="hs-identifier hs-var">PatSyn</span></a><span> </span><a href="#local-6989586621680224778"><span class="hs-identifier hs-var">lpat</span></a><span> </span><span class="hs-special">(</span><a href="TcType.html#mkCheckExpType"><span class="hs-identifier hs-var">mkCheckExpType</span></a><span> </span><a href="#local-6989586621680224799"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-181"></a><span>           </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224809"><a href="#local-6989586621680224809"><span class="hs-identifier">in_scope</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="VarEnv.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a><span> </span><span class="hs-special">(</span><a href="VarSet.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a><span> </span><a href="#local-6989586621680224806"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">)</span><span>
</span><a name="line-182"></a><span>                    </span><a name="local-6989586621680224810"><a href="#local-6989586621680224810"><span class="hs-identifier">empty_subst</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#mkEmptyTCvSubst"><span class="hs-identifier hs-var">mkEmptyTCvSubst</span></a><span> </span><a href="#local-6989586621680224809"><span class="hs-identifier hs-var">in_scope</span></a><span>
</span><a name="line-183"></a><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224811"><a href="#local-6989586621680224811"><span class="hs-identifier">subst</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224812"><a href="#local-6989586621680224812"><span class="hs-identifier">ex_tvs'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="MonadUtils.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a><span> </span><a href="TcMType.html#newMetaTyVarX"><span class="hs-identifier hs-var">newMetaTyVarX</span></a><span> </span><a href="#local-6989586621680224810"><span class="hs-identifier hs-var">empty_subst</span></a><span> </span><a href="#local-6989586621680224807"><span class="hs-identifier hs-var">ex_tvs</span></a><span>
</span><a name="line-184"></a><span>                    </span><span class="hs-comment">-- newMetaTyVarX: see the &quot;Existential type variables&quot;</span><span>
</span><a name="line-185"></a><span>                    </span><span class="hs-comment">-- part of Note [Checking against a pattern signature]</span><span>
</span><a name="line-186"></a><span>              </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcpatsyn1&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224813"><span class="hs-identifier hs-var">v</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-6989586621680224813"><span class="hs-identifier hs-var">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621680224813"><a href="#local-6989586621680224813"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224807"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-187"></a><span>              </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcpatsyn2&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224814"><span class="hs-identifier hs-var">v</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-6989586621680224814"><span class="hs-identifier hs-var">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621680224814"><a href="#local-6989586621680224814"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224812"><span class="hs-identifier hs-var">ex_tvs'</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-188"></a><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224815"><a href="#local-6989586621680224815"><span class="hs-identifier">prov_theta'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#substTheta"><span class="hs-identifier hs-var">substTheta</span></a><span> </span><a href="#local-6989586621680224811"><span class="hs-identifier hs-var">subst</span></a><span> </span><a href="#local-6989586621680224782"><span class="hs-identifier hs-var">prov_theta</span></a><span>
</span><a name="line-189"></a><span>                  </span><span class="hs-comment">-- Add univ_tvs to the in_scope set to</span><span>
</span><a name="line-190"></a><span>                  </span><span class="hs-comment">-- satisfy the substitution invariant. There's no need to</span><span>
</span><a name="line-191"></a><span>                  </span><span class="hs-comment">-- add 'ex_tvs' as they are already in the domain of the</span><span>
</span><a name="line-192"></a><span>                  </span><span class="hs-comment">-- substitution.</span><span>
</span><a name="line-193"></a><span>                  </span><span class="hs-comment">-- See also Note [The substitution invariant] in TyCoRep.</span><span>
</span><a name="line-194"></a><span>              </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224816"><a href="#local-6989586621680224816"><span class="hs-identifier">prov_dicts</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="TcMType.html#emitWanted"><span class="hs-identifier hs-var">emitWanted</span></a><span> </span><span class="hs-special">(</span><a href="TcRnTypes.html#ProvCtxtOrigin"><span class="hs-identifier hs-var">ProvCtxtOrigin</span></a><span> </span><a href="#local-6989586621680224774"><span class="hs-identifier hs-var">psb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224815"><span class="hs-identifier hs-var">prov_theta'</span></a><span>
</span><a name="line-195"></a><span>              </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224817"><a href="#local-6989586621680224817"><span class="hs-identifier">args'</span></a></a><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Control.Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224786"><span class="hs-identifier hs-var">tc_arg</span></a><span> </span><a href="#local-6989586621680224811"><span class="hs-identifier hs-var">subst</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224793"><span class="hs-identifier hs-var">arg_names</span></a><span> </span><a href="#local-6989586621680224798"><span class="hs-identifier hs-var">arg_tys</span></a><span>
</span><a name="line-196"></a><span>              </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224812"><span class="hs-identifier hs-var">ex_tvs'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224816"><span class="hs-identifier hs-var">prov_dicts</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224817"><span class="hs-identifier hs-var">args'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-197"></a><span>
</span><a name="line-198"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224824"><a href="#local-6989586621680224824"><span class="hs-identifier">skol_info</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcRnTypes.html#SigSkol"><span class="hs-identifier hs-var">SigSkol</span></a><span> </span><span class="hs-special">(</span><a href="TcType.html#PatSynCtxt"><span class="hs-identifier hs-var">PatSynCtxt</span></a><span> </span><a href="#local-6989586621680224776"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224799"><span class="hs-identifier hs-var">pat_ty</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-199"></a><span>                         </span><span class="hs-comment">-- The type here is a bit bogus, but we do not print</span><span>
</span><a name="line-200"></a><span>                         </span><span class="hs-comment">-- the type for PatSynCtxt, so it doesn't matter</span><span>
</span><a name="line-201"></a><span>                         </span><span class="hs-comment">-- See TcRnTypes Note [Skolem info for pattern synonyms]</span><span>
</span><a name="line-202"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224825"><a href="#local-6989586621680224825"><span class="hs-identifier">implics</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224826"><a href="#local-6989586621680224826"><span class="hs-identifier">ev_binds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcUnify.html#buildImplicationFor"><span class="hs-identifier hs-var">buildImplicationFor</span></a><span> </span><a href="#local-6989586621680224818"><span class="hs-identifier hs-var">tclvl</span></a><span> </span><a href="#local-6989586621680224824"><span class="hs-identifier hs-var">skol_info</span></a><span> </span><a href="#local-6989586621680224806"><span class="hs-identifier hs-var">univ_tvs</span></a><span> </span><a href="#local-6989586621680224808"><span class="hs-identifier hs-var">req_dicts</span></a><span> </span><a href="#local-6989586621680224819"><span class="hs-identifier hs-var">wanted</span></a><span>
</span><a name="line-203"></a><span>
</span><a name="line-204"></a><span>       </span><span class="hs-comment">-- Solve the constraints now, because we are about to make a PatSyn,</span><span>
</span><a name="line-205"></a><span>       </span><span class="hs-comment">-- which should not contain unification variables and the like (Trac #10997)</span><span>
</span><a name="line-206"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcSimplify.html#simplifyTopImplic"><span class="hs-identifier hs-var">simplifyTopImplic</span></a><span> </span><a href="#local-6989586621680224825"><span class="hs-identifier hs-var">implics</span></a><span>
</span><a name="line-207"></a><span>
</span><a name="line-208"></a><span>       </span><span class="hs-comment">-- ToDo: in the bidirectional case, check that the ex_tvs' are all distinct</span><span>
</span><a name="line-209"></a><span>       </span><span class="hs-comment">-- Otherwise we may get a type error when typechecking the builder,</span><span>
</span><a name="line-210"></a><span>       </span><span class="hs-comment">-- when that should be impossible</span><span>
</span><a name="line-211"></a><span>
</span><a name="line-212"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcCheckPatSynDecl }&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224776"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-213"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcPatSyn.html#tc_patsyn_finish"><span class="hs-identifier hs-var">tc_patsyn_finish</span></a><span> </span><a href="#local-6989586621680224775"><span class="hs-identifier hs-var">lname</span></a><span> </span><a href="#local-6989586621680224779"><span class="hs-identifier hs-var">dir</span></a><span> </span><a href="#local-6989586621680224795"><span class="hs-identifier hs-var">is_infix</span></a><span> </span><a href="#local-6989586621680224820"><span class="hs-identifier hs-var">lpat'</span></a><span>
</span><a name="line-214"></a><span>                          </span><span class="hs-special">(</span><a href="#local-6989586621680224804"><span class="hs-identifier hs-var">univ_bndrs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224784"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224826"><span class="hs-identifier hs-var">ev_binds</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224808"><span class="hs-identifier hs-var">req_dicts</span></a><span class="hs-special">)</span><span>
</span><a name="line-215"></a><span>                          </span><span class="hs-special">(</span><a href="#local-6989586621680224805"><span class="hs-identifier hs-var">ex_bndrs</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#mkTyVarTys"><span class="hs-identifier hs-var">mkTyVarTys</span></a><span> </span><a href="#local-6989586621680224821"><span class="hs-identifier hs-var">ex_tvs'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224782"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224822"><span class="hs-identifier hs-var">prov_dicts</span></a><span class="hs-special">)</span><span>
</span><a name="line-216"></a><span>                          </span><span class="hs-special">(</span><a href="#local-6989586621680224823"><span class="hs-identifier hs-var">args'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224798"><span class="hs-identifier hs-var">arg_tys</span></a><span class="hs-special">)</span><span>
</span><a name="line-217"></a><span>                          </span><a href="#local-6989586621680224799"><span class="hs-identifier hs-var">pat_ty</span></a><span> </span><a href="#local-6989586621680224794"><span class="hs-identifier hs-var">rec_fields</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-218"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-219"></a><span>    </span><span class="hs-identifier">tc_arg</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#TCvSubst"><span class="hs-identifier hs-type">TCvSubst</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcTcId"><span class="hs-identifier hs-type">GhcTcId</span></a><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>    </span><a name="local-6989586621680224786"><a href="#local-6989586621680224786"><span class="hs-identifier">tc_arg</span></a></a><span> </span><a name="local-6989586621680224787"><a href="#local-6989586621680224787"><span class="hs-identifier">subst</span></a></a><span> </span><a name="local-6989586621680224788"><a href="#local-6989586621680224788"><span class="hs-identifier">arg_name</span></a></a><span> </span><a name="local-6989586621680224789"><a href="#local-6989586621680224789"><span class="hs-identifier">arg_ty</span></a></a><span>
</span><a name="line-221"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>   </span><span class="hs-comment">-- Look up the variable actually bound by lpat</span><span>
</span><a name="line-222"></a><span>               </span><span class="hs-comment">-- and check that it has the expected type</span><span>
</span><a name="line-223"></a><span>             </span><a name="local-6989586621680224790"><a href="#local-6989586621680224790"><span class="hs-identifier">arg_id</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcEnv.html#tcLookupId"><span class="hs-identifier hs-var">tcLookupId</span></a><span> </span><a href="#local-6989586621680224788"><span class="hs-identifier hs-var">arg_name</span></a><span>
</span><a name="line-224"></a><span>           </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224791"><a href="#local-6989586621680224791"><span class="hs-identifier">wrap</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcUnify.html#tcSubType_NC"><span class="hs-identifier hs-var">tcSubType_NC</span></a><span> </span><a href="TcType.html#GenSigCtxt"><span class="hs-identifier hs-var">GenSigCtxt</span></a><span>
</span><a name="line-225"></a><span>                                 </span><span class="hs-special">(</span><a href="Id.html#idType"><span class="hs-identifier hs-var">idType</span></a><span> </span><a href="#local-6989586621680224790"><span class="hs-identifier hs-var">arg_id</span></a><span class="hs-special">)</span><span>
</span><a name="line-226"></a><span>                                 </span><span class="hs-special">(</span><a href="TyCoRep.html#substTyUnchecked"><span class="hs-identifier hs-var">substTyUnchecked</span></a><span> </span><a href="#local-6989586621680224787"><span class="hs-identifier hs-var">subst</span></a><span> </span><a href="#local-6989586621680224789"><span class="hs-identifier hs-var">arg_ty</span></a><span class="hs-special">)</span><span>
</span><a name="line-227"></a><span>                </span><span class="hs-comment">-- Why do we need tcSubType here?</span><span>
</span><a name="line-228"></a><span>                </span><span class="hs-comment">-- See Note [Pattern synonyms and higher rank types]</span><span>
</span><a name="line-229"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="HsUtils.html#mkLHsWrap"><span class="hs-identifier hs-var">mkLHsWrap</span></a><span> </span><a href="#local-6989586621680224791"><span class="hs-identifier hs-var">wrap</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsUtils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a><span> </span><a href="#local-6989586621680224790"><span class="hs-identifier hs-var">arg_id</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-230"></a><span>
</span><a name="line-231"></a><span class="hs-comment">{- [Pattern synonyms and higher rank types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  data T = MkT (forall a. a-&gt;a)

  pattern P :: (Int -&gt; Int) -&gt; T
  pattern P x &lt;- MkT x

This should work.  But in the matcher we must match against MkT, and then
instantiate its argument 'x', to get a function of type (Int -&gt; Int).
Equality is not enough!  Trac #13752 was an example.

Note [Checking against a pattern signature]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When checking the actual supplied pattern against the pattern synonym
signature, we need to be quite careful.

----- Provided constraints
Example

    data T a where
      MkT :: Ord a =&gt; a -&gt; T a

    pattern P :: () =&gt; Eq a =&gt; a -&gt; [T a]
    pattern P x = [MkT x]

We must check that the (Eq a) that P claims to bind (and to
make available to matches against P), is derivable from the
actual pattern.  For example:
    f (P (x::a)) = ...here (Eq a) should be available...
And yes, (Eq a) is derivable from the (Ord a) bound by P's rhs.

----- Existential type variables
Unusually, we instantiate the existential tyvars of the pattern with
*meta* type variables.  For example

    data S where
      MkS :: Eq a =&gt; [a] -&gt; S

    pattern P :: () =&gt; Eq x =&gt; x -&gt; S
    pattern P x &lt;- MkS x

The pattern synonym conceals from its client the fact that MkS has a
list inside it.  The client just thinks it's a type 'x'.  So we must
unify x := [a] during type checking, and then use the instantiating type
[a] (called ex_tys) when building the matcher.  In this case we'll get

   $mP :: S -&gt; (forall x. Ex x =&gt; x -&gt; r) -&gt; r -&gt; r
   $mP x k = case x of
               MkS a (d:Eq a) (ys:[a]) -&gt; let dl :: Eq [a]
                                              dl = $dfunEqList d
                                          in k [a] dl ys

All this applies when type-checking the /matching/ side of
a pattern synonym.  What about the /building/ side?

* For Unidirectional, there is no builder

* For ExplicitBidirectional, the builder is completely separate
  code, typechecked in tcPatSynBuilderBind

* For ImplicitBidirectional, the builder is still typechecked in
  tcPatSynBuilderBind, by converting the pattern to an expression and
  typechecking it.

  At one point, for ImplicitBidirectional I used SigTvs (instead of
  TauTvs) in tcCheckPatSynDecl.  But (a) strengthening the check here
  is redundant since tcPatSynBuilderBind does the job, (b) it was
  still incomplete (SigTvs can unify with each other), and (c) it
  didn't even work (Trac #13441 was accepted with
  ExplicitBidirectional, but rejected if expressed in
  ImplicitBidirectional form.  Conclusion: trying to be too clever is
  a bad idea.
-}</span><span>
</span><a name="line-305"></a><span>
</span><a name="line-306"></a><span class="hs-identifier">collectPatSynArgInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">)</span><span>
</span><a name="line-307"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span>
</span><a name="line-308"></a><a name="collectPatSynArgInfo"><a href="TcPatSyn.html#collectPatSynArgInfo"><span class="hs-identifier">collectPatSynArgInfo</span></a></a><span> </span><a name="local-6989586621680224827"><a href="#local-6989586621680224827"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-309"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680224827"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-310"></a><span>    </span><a href="HsTypes.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a><span> </span><a name="local-6989586621680224831"><a href="#local-6989586621680224831"><span class="hs-identifier">names</span></a></a><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680224831"><span class="hs-identifier hs-var">names</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-311"></a><span>    </span><a href="HsTypes.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a><span> </span><a name="local-6989586621680224832"><a href="#local-6989586621680224832"><span class="hs-identifier">name1</span></a></a><span> </span><a name="local-6989586621680224833"><a href="#local-6989586621680224833"><span class="hs-identifier">name2</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224832"><span class="hs-identifier hs-var">name1</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224833"><span class="hs-identifier hs-var">name2</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">)</span><span>
</span><a name="line-312"></a><span>    </span><a href="HsTypes.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a><span> </span><a name="local-6989586621680224834"><a href="#local-6989586621680224834"><span class="hs-identifier">names</span></a></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224835"><span class="hs-identifier hs-var">vars</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224836"><span class="hs-identifier hs-var">sels</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-313"></a><span>                         </span><span class="hs-keyword">where</span><span>
</span><a name="line-314"></a><span>                            </span><span class="hs-special">(</span><a name="local-6989586621680224835"><a href="#local-6989586621680224835"><span class="hs-identifier">vars</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224836"><a href="#local-6989586621680224836"><span class="hs-identifier">sels</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680224828"><span class="hs-identifier hs-var">splitRecordPatSyn</span></a><span> </span><a href="#local-6989586621680224834"><span class="hs-identifier hs-var">names</span></a><span class="hs-special">)</span><span>
</span><a name="line-315"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-316"></a><span>    </span><span class="hs-identifier">splitRecordPatSyn</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">)</span><span>
</span><a name="line-317"></a><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">,</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">)</span><span>
</span><a name="line-318"></a><span>    </span><a name="local-6989586621680224828"><a href="#local-6989586621680224828"><span class="hs-identifier">splitRecordPatSyn</span></a></a><span> </span><span class="hs-special">(</span><a href="HsBinds.html#RecordPatSynField"><span class="hs-identifier hs-var">RecordPatSynField</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">recordPatSynPatVar</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680224829"><a href="#local-6989586621680224829"><span class="hs-identifier">patVar</span></a></a><span>
</span><a name="line-319"></a><span>                                         </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">recordPatSynSelectorId</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680224830"><a href="#local-6989586621680224830"><span class="hs-identifier">selId</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-320"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224829"><span class="hs-identifier hs-var">patVar</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224830"><span class="hs-identifier hs-var">selId</span></a><span class="hs-special">)</span><span>
</span><a name="line-321"></a><span>
</span><a name="line-322"></a><span class="hs-identifier">addPatSynCtxt</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><a href="#local-6989586621680224746"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><a href="#local-6989586621680224746"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-323"></a><a name="addPatSynCtxt"><a href="TcPatSyn.html#addPatSynCtxt"><span class="hs-identifier">addPatSynCtxt</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680224837"><a href="#local-6989586621680224837"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-6989586621680224838"><a href="#local-6989586621680224838"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621680224839"><a href="#local-6989586621680224839"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-324"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a><span> </span><a href="#local-6989586621680224837"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-325"></a><span>    </span><a href="TcRnMonad.html#addErrCtxt"><span class="hs-identifier hs-var">addErrCtxt</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;In the declaration for pattern synonym&quot;</span><span>
</span><a name="line-326"></a><span>                </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224838"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-327"></a><span>    </span><a href="#local-6989586621680224839"><span class="hs-identifier hs-var">thing_inside</span></a><span>
</span><a name="line-328"></a><span>
</span><a name="line-329"></a><span class="hs-identifier">wrongNumberOfParmsErr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><a href="#local-6989586621680224745"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-330"></a><a name="wrongNumberOfParmsErr"><a href="TcPatSyn.html#wrongNumberOfParmsErr"><span class="hs-identifier">wrongNumberOfParmsErr</span></a></a><span> </span><a name="local-6989586621680224840"><a href="#local-6989586621680224840"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621680224841"><a href="#local-6989586621680224841"><span class="hs-identifier">decl_arity</span></a></a><span> </span><a name="local-6989586621680224842"><a href="#local-6989586621680224842"><span class="hs-identifier">missing</span></a></a><span>
</span><a name="line-331"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-332"></a><span>    </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Pattern synonym&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224840"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a><span> </span><span class="hs-string">&quot;has&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-333"></a><span>          </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#speakNOf"><span class="hs-identifier hs-var">speakNOf</span></a><span> </span><a href="#local-6989586621680224841"><span class="hs-identifier hs-var">decl_arity</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;argument&quot;</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-334"></a><span>       </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;but its type signature has&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680224842"><span class="hs-identifier hs-var">missing</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;fewer arrows&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-335"></a><span>
</span><a name="line-336"></a><span class="hs-comment">-------------------------</span><span>
</span><a name="line-337"></a><span class="hs-comment">-- Shared by both tcInferPatSyn and tcCheckPatSyn</span><span>
</span><a name="line-338"></a><span class="hs-identifier">tc_patsyn_finish</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span>      </span><span class="hs-comment">-- ^ PatSyn Name</span><span>
</span><a name="line-339"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsBinds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-comment">-- ^ PatSyn type (Uni/Bidir/ExplicitBidir)</span><span>
</span><a name="line-340"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>              </span><span class="hs-comment">-- ^ Whether infix</span><span>
</span><a name="line-341"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span>        </span><span class="hs-comment">-- ^ Pattern of the PatSyn</span><span>
</span><a name="line-342"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="TcType.html#TcTyVarBinder"><span class="hs-identifier hs-type">TcTyVarBinder</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-343"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="TcType.html#TcTyVarBinder"><span class="hs-identifier hs-type">TcTyVarBinder</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-344"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcTcId"><span class="hs-identifier hs-type">GhcTcId</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- ^ Pattern arguments and</span><span>
</span><a name="line-345"></a><span>                                                    </span><span class="hs-comment">-- types</span><span>
</span><a name="line-346"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span>            </span><span class="hs-comment">-- ^ Pattern type</span><span>
</span><a name="line-347"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">]</span><span>            </span><span class="hs-comment">-- ^ Selector names</span><span>
</span><a name="line-348"></a><span>                 </span><span class="hs-comment">-- ^ Whether fields, empty if not record PatSyn</span><span>
</span><a name="line-349"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="HsBinds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">,</span><span> </span><a href="TcRnTypes.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a><span class="hs-special">)</span><span>
</span><a name="line-350"></a><a name="tc_patsyn_finish"><a href="TcPatSyn.html#tc_patsyn_finish"><span class="hs-identifier">tc_patsyn_finish</span></a></a><span> </span><a name="local-6989586621680224843"><a href="#local-6989586621680224843"><span class="hs-identifier">lname</span></a></a><span> </span><a name="local-6989586621680224844"><a href="#local-6989586621680224844"><span class="hs-identifier">dir</span></a></a><span> </span><a name="local-6989586621680224845"><a href="#local-6989586621680224845"><span class="hs-identifier">is_infix</span></a></a><span> </span><a name="local-6989586621680224846"><a href="#local-6989586621680224846"><span class="hs-identifier">lpat'</span></a></a><span>
</span><a name="line-351"></a><span>                 </span><span class="hs-special">(</span><a name="local-6989586621680224847"><a href="#local-6989586621680224847"><span class="hs-identifier">univ_tvs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224848"><a href="#local-6989586621680224848"><span class="hs-identifier">req_theta</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224849"><a href="#local-6989586621680224849"><span class="hs-identifier">req_ev_binds</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224850"><a href="#local-6989586621680224850"><span class="hs-identifier">req_dicts</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-352"></a><span>                 </span><span class="hs-special">(</span><a name="local-6989586621680224851"><a href="#local-6989586621680224851"><span class="hs-identifier">ex_tvs</span></a></a><span class="hs-special">,</span><span>   </span><a name="local-6989586621680224852"><a href="#local-6989586621680224852"><span class="hs-identifier">ex_tys</span></a></a><span class="hs-special">,</span><span>    </span><a name="local-6989586621680224853"><a href="#local-6989586621680224853"><span class="hs-identifier">prov_theta</span></a></a><span class="hs-special">,</span><span>   </span><a name="local-6989586621680224854"><a href="#local-6989586621680224854"><span class="hs-identifier">prov_dicts</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-353"></a><span>                 </span><span class="hs-special">(</span><a name="local-6989586621680224855"><a href="#local-6989586621680224855"><span class="hs-identifier">args</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224856"><a href="#local-6989586621680224856"><span class="hs-identifier">arg_tys</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-354"></a><span>                 </span><a name="local-6989586621680224857"><a href="#local-6989586621680224857"><span class="hs-identifier">pat_ty</span></a></a><span> </span><a name="local-6989586621680224858"><a href="#local-6989586621680224858"><span class="hs-identifier">field_labels</span></a></a><span>
</span><a name="line-355"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Zonk everything.  We are about to build a final PatSyn</span><span>
</span><a name="line-356"></a><span>         </span><span class="hs-comment">-- so there had better be no unification variables in there</span><span>
</span><a name="line-357"></a><span>
</span><a name="line-358"></a><span>         </span><span class="hs-special">(</span><a name="local-6989586621680224859"><a href="#local-6989586621680224859"><span class="hs-identifier">ze</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224860"><a href="#local-6989586621680224860"><span class="hs-identifier">univ_tvs'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcHsSyn.html#zonkTyVarBindersX"><span class="hs-identifier hs-var">zonkTyVarBindersX</span></a><span> </span><a href="TcHsSyn.html#emptyZonkEnv"><span class="hs-identifier hs-var">emptyZonkEnv</span></a><span> </span><a href="#local-6989586621680224847"><span class="hs-identifier hs-var">univ_tvs</span></a><span>
</span><a name="line-359"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224861"><a href="#local-6989586621680224861"><span class="hs-identifier">req_theta'</span></a></a><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcHsSyn.html#zonkTcTypeToTypes"><span class="hs-identifier hs-var">zonkTcTypeToTypes</span></a><span> </span><a href="#local-6989586621680224859"><span class="hs-identifier hs-var">ze</span></a><span> </span><a href="#local-6989586621680224848"><span class="hs-identifier hs-var">req_theta</span></a><span>
</span><a name="line-360"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224862"><a href="#local-6989586621680224862"><span class="hs-identifier">ze</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224863"><a href="#local-6989586621680224863"><span class="hs-identifier">ex_tvs'</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcHsSyn.html#zonkTyVarBindersX"><span class="hs-identifier hs-var">zonkTyVarBindersX</span></a><span> </span><a href="#local-6989586621680224859"><span class="hs-identifier hs-var">ze</span></a><span> </span><a href="#local-6989586621680224851"><span class="hs-identifier hs-var">ex_tvs</span></a><span>
</span><a name="line-361"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224864"><a href="#local-6989586621680224864"><span class="hs-identifier">prov_theta'</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcHsSyn.html#zonkTcTypeToTypes"><span class="hs-identifier hs-var">zonkTcTypeToTypes</span></a><span> </span><a href="#local-6989586621680224862"><span class="hs-identifier hs-var">ze</span></a><span> </span><a href="#local-6989586621680224853"><span class="hs-identifier hs-var">prov_theta</span></a><span>
</span><a name="line-362"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224865"><a href="#local-6989586621680224865"><span class="hs-identifier">pat_ty'</span></a></a><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcHsSyn.html#zonkTcTypeToType"><span class="hs-identifier hs-var">zonkTcTypeToType</span></a><span> </span><a href="#local-6989586621680224862"><span class="hs-identifier hs-var">ze</span></a><span> </span><a href="#local-6989586621680224857"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-363"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224866"><a href="#local-6989586621680224866"><span class="hs-identifier">arg_tys'</span></a></a><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcHsSyn.html#zonkTcTypeToTypes"><span class="hs-identifier hs-var">zonkTcTypeToTypes</span></a><span> </span><a href="#local-6989586621680224862"><span class="hs-identifier hs-var">ze</span></a><span> </span><a href="#local-6989586621680224856"><span class="hs-identifier hs-var">arg_tys</span></a><span>
</span><a name="line-364"></a><span>
</span><a name="line-365"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224867"><a href="#local-6989586621680224867"><span class="hs-identifier">env1</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224868"><a href="#local-6989586621680224868"><span class="hs-identifier">univ_tvs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#tidyTyVarBinders"><span class="hs-identifier hs-var">tidyTyVarBinders</span></a><span> </span><a href="VarEnv.html#emptyTidyEnv"><span class="hs-identifier hs-var">emptyTidyEnv</span></a><span> </span><a href="#local-6989586621680224860"><span class="hs-identifier hs-var">univ_tvs'</span></a><span>
</span><a name="line-366"></a><span>             </span><span class="hs-special">(</span><a name="local-6989586621680224869"><a href="#local-6989586621680224869"><span class="hs-identifier">env2</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224870"><a href="#local-6989586621680224870"><span class="hs-identifier">ex_tvs</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#tidyTyVarBinders"><span class="hs-identifier hs-var">tidyTyVarBinders</span></a><span> </span><a href="#local-6989586621680224867"><span class="hs-identifier hs-var">env1</span></a><span> </span><a href="#local-6989586621680224863"><span class="hs-identifier hs-var">ex_tvs'</span></a><span>
</span><a name="line-367"></a><span>             </span><a name="local-6989586621680224871"><a href="#local-6989586621680224871"><span class="hs-identifier">req_theta</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a><span> </span><a href="#local-6989586621680224869"><span class="hs-identifier hs-var">env2</span></a><span> </span><a href="#local-6989586621680224861"><span class="hs-identifier hs-var">req_theta'</span></a><span>
</span><a name="line-368"></a><span>             </span><a name="local-6989586621680224872"><a href="#local-6989586621680224872"><span class="hs-identifier">prov_theta</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a><span> </span><a href="#local-6989586621680224869"><span class="hs-identifier hs-var">env2</span></a><span> </span><a href="#local-6989586621680224864"><span class="hs-identifier hs-var">prov_theta'</span></a><span>
</span><a name="line-369"></a><span>             </span><a name="local-6989586621680224873"><a href="#local-6989586621680224873"><span class="hs-identifier">arg_tys</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a><span> </span><a href="#local-6989586621680224869"><span class="hs-identifier hs-var">env2</span></a><span> </span><a href="#local-6989586621680224866"><span class="hs-identifier hs-var">arg_tys'</span></a><span>
</span><a name="line-370"></a><span>             </span><a name="local-6989586621680224874"><a href="#local-6989586621680224874"><span class="hs-identifier">pat_ty</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#tidyType"><span class="hs-identifier hs-var">tidyType</span></a><span>  </span><a href="#local-6989586621680224869"><span class="hs-identifier hs-var">env2</span></a><span> </span><a href="#local-6989586621680224865"><span class="hs-identifier hs-var">pat_ty'</span></a><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tc_patsyn_finish {&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-373"></a><span>           </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680224843"><span class="hs-identifier hs-var">lname</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680224846"><span class="hs-identifier hs-var">lpat'</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span>
</span><a name="line-374"></a><span>           </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224868"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224871"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224849"><span class="hs-identifier hs-var">req_ev_binds</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224850"><span class="hs-identifier hs-var">req_dicts</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span>
</span><a name="line-375"></a><span>           </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224870"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224872"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224854"><span class="hs-identifier hs-var">prov_dicts</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span>
</span><a name="line-376"></a><span>           </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224855"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span>
</span><a name="line-377"></a><span>           </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224873"><span class="hs-identifier hs-var">arg_tys</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span>
</span><a name="line-378"></a><span>           </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224874"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-379"></a><span>
</span><a name="line-380"></a><span>       </span><span class="hs-comment">-- Make the 'matcher'</span><span>
</span><a name="line-381"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224875"><a href="#local-6989586621680224875"><span class="hs-identifier">matcher_id</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224876"><a href="#local-6989586621680224876"><span class="hs-identifier">matcher_bind</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcPatSyn.html#tcPatSynMatcher"><span class="hs-identifier hs-var">tcPatSynMatcher</span></a><span> </span><a href="#local-6989586621680224843"><span class="hs-identifier hs-var">lname</span></a><span> </span><a href="#local-6989586621680224846"><span class="hs-identifier hs-var">lpat'</span></a><span>
</span><a name="line-382"></a><span>                                         </span><span class="hs-special">(</span><a href="Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a><span> </span><a href="#local-6989586621680224868"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224871"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224849"><span class="hs-identifier hs-var">req_ev_binds</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224850"><span class="hs-identifier hs-var">req_dicts</span></a><span class="hs-special">)</span><span>
</span><a name="line-383"></a><span>                                         </span><span class="hs-special">(</span><a href="Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a><span> </span><a href="#local-6989586621680224870"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224852"><span class="hs-identifier hs-var">ex_tys</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224872"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224854"><span class="hs-identifier hs-var">prov_dicts</span></a><span class="hs-special">)</span><span>
</span><a name="line-384"></a><span>                                         </span><span class="hs-special">(</span><a href="#local-6989586621680224855"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224873"><span class="hs-identifier hs-var">arg_tys</span></a><span class="hs-special">)</span><span>
</span><a name="line-385"></a><span>                                         </span><a href="#local-6989586621680224874"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-386"></a><span>
</span><a name="line-387"></a><span>       </span><span class="hs-comment">-- Make the 'builder'</span><span>
</span><a name="line-388"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224877"><a href="#local-6989586621680224877"><span class="hs-identifier">builder_id</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcPatSyn.html#mkPatSynBuilderId"><span class="hs-identifier hs-var">mkPatSynBuilderId</span></a><span> </span><a href="#local-6989586621680224844"><span class="hs-identifier hs-var">dir</span></a><span> </span><a href="#local-6989586621680224843"><span class="hs-identifier hs-var">lname</span></a><span>
</span><a name="line-389"></a><span>                                         </span><a href="#local-6989586621680224868"><span class="hs-identifier hs-var">univ_tvs</span></a><span> </span><a href="#local-6989586621680224871"><span class="hs-identifier hs-var">req_theta</span></a><span>
</span><a name="line-390"></a><span>                                         </span><a href="#local-6989586621680224870"><span class="hs-identifier hs-var">ex_tvs</span></a><span>   </span><a href="#local-6989586621680224872"><span class="hs-identifier hs-var">prov_theta</span></a><span>
</span><a name="line-391"></a><span>                                         </span><a href="#local-6989586621680224873"><span class="hs-identifier hs-var">arg_tys</span></a><span> </span><a href="#local-6989586621680224874"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-392"></a><span>
</span><a name="line-393"></a><span>         </span><span class="hs-comment">-- TODO: Make this have the proper information</span><span>
</span><a name="line-394"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224878"><a href="#local-6989586621680224878"><span class="hs-identifier">mkFieldLabel</span></a></a><span> </span><a name="local-6989586621680224880"><a href="#local-6989586621680224880"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="FieldLabel.html#FieldLabel"><span class="hs-identifier hs-var">FieldLabel</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">flLabel</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">occNameFS</span><span> </span><span class="hs-special">(</span><a href="Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a><span> </span><a href="#local-6989586621680224880"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-395"></a><span>                                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">flIsOverloaded</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-396"></a><span>                                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">flSelector</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224880"><span class="hs-identifier hs-var">name</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-397"></a><span>             </span><a name="local-6989586621680224879"><a href="#local-6989586621680224879"><span class="hs-identifier">field_labels'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680224878"><span class="hs-identifier hs-var">mkFieldLabel</span></a><span> </span><a href="#local-6989586621680224858"><span class="hs-identifier hs-var">field_labels</span></a><span>
</span><a name="line-398"></a><span>
</span><a name="line-399"></a><span>
</span><a name="line-400"></a><span>       </span><span class="hs-comment">-- Make the PatSyn itself</span><span>
</span><a name="line-401"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224881"><a href="#local-6989586621680224881"><span class="hs-identifier">patSyn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="PatSyn.html#mkPatSyn"><span class="hs-identifier hs-var">mkPatSyn</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680224843"><span class="hs-identifier hs-var">lname</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224845"><span class="hs-identifier hs-var">is_infix</span></a><span>
</span><a name="line-402"></a><span>                        </span><span class="hs-special">(</span><a href="#local-6989586621680224868"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224871"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">)</span><span>
</span><a name="line-403"></a><span>                        </span><span class="hs-special">(</span><a href="#local-6989586621680224870"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224872"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">)</span><span>
</span><a name="line-404"></a><span>                        </span><a href="#local-6989586621680224873"><span class="hs-identifier hs-var">arg_tys</span></a><span>
</span><a name="line-405"></a><span>                        </span><a href="#local-6989586621680224874"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-406"></a><span>                        </span><a href="#local-6989586621680224875"><span class="hs-identifier hs-var">matcher_id</span></a><span> </span><a href="#local-6989586621680224877"><span class="hs-identifier hs-var">builder_id</span></a><span>
</span><a name="line-407"></a><span>                        </span><a href="#local-6989586621680224879"><span class="hs-identifier hs-var">field_labels'</span></a><span>
</span><a name="line-408"></a><span>
</span><a name="line-409"></a><span>       </span><span class="hs-comment">-- Selectors</span><span>
</span><a name="line-410"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224882"><a href="#local-6989586621680224882"><span class="hs-identifier">rn_rec_sel_binds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#mkPatSynRecSelBinds"><span class="hs-identifier hs-var">mkPatSynRecSelBinds</span></a><span> </span><a href="#local-6989586621680224881"><span class="hs-identifier hs-var">patSyn</span></a><span> </span><span class="hs-special">(</span><a href="PatSyn.html#patSynFieldLabels"><span class="hs-identifier hs-var">patSynFieldLabels</span></a><span> </span><a href="#local-6989586621680224881"><span class="hs-identifier hs-var">patSyn</span></a><span class="hs-special">)</span><span>
</span><a name="line-411"></a><span>             </span><a name="local-6989586621680224883"><a href="#local-6989586621680224883"><span class="hs-identifier">tything</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a><span> </span><span class="hs-special">(</span><a href="ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a><span> </span><a href="#local-6989586621680224881"><span class="hs-identifier hs-var">patSyn</span></a><span class="hs-special">)</span><span>
</span><a name="line-412"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224884"><a href="#local-6989586621680224884"><span class="hs-identifier">tcg_env</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcEnv.html#tcExtendGlobalEnv"><span class="hs-identifier hs-var">tcExtendGlobalEnv</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224883"><span class="hs-identifier hs-var">tything</span></a><span class="hs-special">]</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-413"></a><span>                    </span><a href="TcBinds.html#tcRecSelBinds"><span class="hs-identifier hs-var">tcRecSelBinds</span></a><span> </span><a href="#local-6989586621680224882"><span class="hs-identifier hs-var">rn_rec_sel_binds</span></a><span>
</span><a name="line-414"></a><span>
</span><a name="line-415"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tc_patsyn_finish }&quot;</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-416"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224876"><span class="hs-identifier hs-var">matcher_bind</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224884"><span class="hs-identifier hs-var">tcg_env</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-417"></a><span>
</span><a name="line-418"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
         Constructing the &quot;matcher&quot; Id and its binding
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-425"></a><span>
</span><a name="line-426"></a><span class="hs-identifier">tcPatSynMatcher</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span>
</span><a name="line-427"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span>
</span><a name="line-428"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="TcType.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-429"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="TcType.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-430"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcTcId"><span class="hs-identifier hs-type">GhcTcId</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-431"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span>
</span><a name="line-432"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="HsBinds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">)</span><span>
</span><a name="line-433"></a><span class="hs-comment">-- See Note [Matchers and builders for pattern synonyms] in PatSyn</span><span>
</span><a name="line-434"></a><a name="tcPatSynMatcher"><a href="TcPatSyn.html#tcPatSynMatcher"><span class="hs-identifier">tcPatSynMatcher</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680224885"><a href="#local-6989586621680224885"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-6989586621680224886"><a href="#local-6989586621680224886"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621680224887"><a href="#local-6989586621680224887"><span class="hs-identifier">lpat</span></a></a><span>
</span><a name="line-435"></a><span>                </span><span class="hs-special">(</span><a name="local-6989586621680224888"><a href="#local-6989586621680224888"><span class="hs-identifier">univ_tvs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224889"><a href="#local-6989586621680224889"><span class="hs-identifier">req_theta</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224890"><a href="#local-6989586621680224890"><span class="hs-identifier">req_ev_binds</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224891"><a href="#local-6989586621680224891"><span class="hs-identifier">req_dicts</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-436"></a><span>                </span><span class="hs-special">(</span><a name="local-6989586621680224892"><a href="#local-6989586621680224892"><span class="hs-identifier">ex_tvs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224893"><a href="#local-6989586621680224893"><span class="hs-identifier">ex_tys</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224894"><a href="#local-6989586621680224894"><span class="hs-identifier">prov_theta</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224895"><a href="#local-6989586621680224895"><span class="hs-identifier">prov_dicts</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-437"></a><span>                </span><span class="hs-special">(</span><a name="local-6989586621680224896"><a href="#local-6989586621680224896"><span class="hs-identifier">args</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224897"><a href="#local-6989586621680224897"><span class="hs-identifier">arg_tys</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621680224898"><a href="#local-6989586621680224898"><span class="hs-identifier">pat_ty</span></a></a><span>
</span><a name="line-438"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680224899"><a href="#local-6989586621680224899"><span class="hs-identifier">rr_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newNameAt"><span class="hs-identifier hs-var">newNameAt</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkTyVarOcc"><span class="hs-identifier hs-var">mkTyVarOcc</span></a><span> </span><span class="hs-string">&quot;rep&quot;</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224885"><span class="hs-identifier hs-var">loc</span></a><span>
</span><a name="line-439"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224900"><a href="#local-6989586621680224900"><span class="hs-identifier">tv_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newNameAt"><span class="hs-identifier hs-var">newNameAt</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkTyVarOcc"><span class="hs-identifier hs-var">mkTyVarOcc</span></a><span> </span><span class="hs-string">&quot;r&quot;</span><span class="hs-special">)</span><span>   </span><a href="#local-6989586621680224885"><span class="hs-identifier hs-var">loc</span></a><span>
</span><a name="line-440"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224901"><a href="#local-6989586621680224901"><span class="hs-identifier">rr_tv</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a><span> </span><a href="#local-6989586621680224899"><span class="hs-identifier hs-var">rr_name</span></a><span> </span><a href="TysWiredIn.html#runtimeRepTy"><span class="hs-identifier hs-var">runtimeRepTy</span></a><span> </span><a href="TcType.html#vanillaSkolemTv"><span class="hs-identifier hs-var">vanillaSkolemTv</span></a><span>
</span><a name="line-441"></a><span>             </span><a name="local-6989586621680224902"><a href="#local-6989586621680224902"><span class="hs-identifier">rr</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a><span> </span><a href="#local-6989586621680224901"><span class="hs-identifier hs-var">rr_tv</span></a><span>
</span><a name="line-442"></a><span>             </span><a name="local-6989586621680224903"><a href="#local-6989586621680224903"><span class="hs-identifier">res_tv</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a><span> </span><a href="#local-6989586621680224900"><span class="hs-identifier hs-var">tv_name</span></a><span> </span><span class="hs-special">(</span><a href="TysPrim.html#tYPE"><span class="hs-identifier hs-var">tYPE</span></a><span> </span><a href="#local-6989586621680224902"><span class="hs-identifier hs-var">rr</span></a><span class="hs-special">)</span><span> </span><a href="TcType.html#vanillaSkolemTv"><span class="hs-identifier hs-var">vanillaSkolemTv</span></a><span>
</span><a name="line-443"></a><span>             </span><a name="local-6989586621680224904"><a href="#local-6989586621680224904"><span class="hs-identifier">res_ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a><span> </span><a href="#local-6989586621680224903"><span class="hs-identifier hs-var">res_tv</span></a><span>
</span><a name="line-444"></a><span>             </span><a name="local-6989586621680224905"><a href="#local-6989586621680224905"><span class="hs-identifier">is_unlifted</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><a href="#local-6989586621680224896"><span class="hs-identifier hs-var">args</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><a href="#local-6989586621680224895"><span class="hs-identifier hs-var">prov_dicts</span></a><span>
</span><a name="line-445"></a><span>             </span><span class="hs-special">(</span><a name="local-6989586621680224906"><a href="#local-6989586621680224906"><span class="hs-identifier">cont_args</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224907"><a href="#local-6989586621680224907"><span class="hs-identifier">cont_arg_tys</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-446"></a><span>               </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680224905"><span class="hs-identifier hs-var">is_unlifted</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="HsUtils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a><span> </span><a href="MkId.html#voidPrimId"><span class="hs-identifier hs-var">voidPrimId</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TysPrim.html#voidPrimTy"><span class="hs-identifier hs-var">voidPrimTy</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-447"></a><span>               </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224896"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">,</span><span>                 </span><a href="#local-6989586621680224897"><span class="hs-identifier hs-var">arg_tys</span></a><span class="hs-special">)</span><span>
</span><a name="line-448"></a><span>             </span><a name="local-6989586621680224908"><a href="#local-6989586621680224908"><span class="hs-identifier">cont_ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcType.html#mkInfSigmaTy"><span class="hs-identifier hs-var">mkInfSigmaTy</span></a><span> </span><a href="#local-6989586621680224892"><span class="hs-identifier hs-var">ex_tvs</span></a><span> </span><a href="#local-6989586621680224894"><span class="hs-identifier hs-var">prov_theta</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-449"></a><span>                       </span><a href="TyCoRep.html#mkFunTys"><span class="hs-identifier hs-var">mkFunTys</span></a><span> </span><a href="#local-6989586621680224907"><span class="hs-identifier hs-var">cont_arg_tys</span></a><span> </span><a href="#local-6989586621680224904"><span class="hs-identifier hs-var">res_ty</span></a><span>
</span><a name="line-450"></a><span>
</span><a name="line-451"></a><span>             </span><a name="local-6989586621680224909"><a href="#local-6989586621680224909"><span class="hs-identifier">fail_ty</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a><span> </span><a href="TysPrim.html#voidPrimTy"><span class="hs-identifier hs-var">voidPrimTy</span></a><span> </span><a href="#local-6989586621680224904"><span class="hs-identifier hs-var">res_ty</span></a><span>
</span><a name="line-452"></a><span>
</span><a name="line-453"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224910"><a href="#local-6989586621680224910"><span class="hs-identifier">matcher_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="BuildTyCl.html#newImplicitBinder"><span class="hs-identifier hs-var">newImplicitBinder</span></a><span> </span><a href="#local-6989586621680224886"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="OccName.html#mkMatcherOcc"><span class="hs-identifier hs-var">mkMatcherOcc</span></a><span>
</span><a name="line-454"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224911"><a href="#local-6989586621680224911"><span class="hs-identifier">scrutinee</span></a></a><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newSysLocalId"><span class="hs-identifier hs-var">newSysLocalId</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a><span> </span><span class="hs-string">&quot;scrut&quot;</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224898"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-455"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224912"><a href="#local-6989586621680224912"><span class="hs-identifier">cont</span></a></a><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newSysLocalId"><span class="hs-identifier hs-var">newSysLocalId</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a><span> </span><span class="hs-string">&quot;cont&quot;</span><span class="hs-special">)</span><span>  </span><a href="#local-6989586621680224908"><span class="hs-identifier hs-var">cont_ty</span></a><span>
</span><a name="line-456"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-6989586621680224913"><a href="#local-6989586621680224913"><span class="hs-identifier">fail</span></a></a><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newSysLocalId"><span class="hs-identifier hs-var">newSysLocalId</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a><span> </span><span class="hs-string">&quot;fail&quot;</span><span class="hs-special">)</span><span>  </span><a href="#local-6989586621680224909"><span class="hs-identifier hs-var">fail_ty</span></a><span>
</span><a name="line-457"></a><span>
</span><a name="line-458"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224914"><a href="#local-6989586621680224914"><span class="hs-identifier">matcher_tau</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#mkFunTys"><span class="hs-identifier hs-var">mkFunTys</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224898"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224908"><span class="hs-identifier hs-var">cont_ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224909"><span class="hs-identifier hs-var">fail_ty</span></a><span class="hs-special">]</span><span> </span><a href="#local-6989586621680224904"><span class="hs-identifier hs-var">res_ty</span></a><span>
</span><a name="line-459"></a><span>             </span><a name="local-6989586621680224915"><a href="#local-6989586621680224915"><span class="hs-identifier">matcher_sigma</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcType.html#mkInfSigmaTy"><span class="hs-identifier hs-var">mkInfSigmaTy</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224901"><span class="hs-identifier hs-var">rr_tv</span></a><span class="hs-glyph">:</span><a href="#local-6989586621680224903"><span class="hs-identifier hs-var">res_tv</span></a><span class="hs-glyph">:</span><a href="#local-6989586621680224888"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224889"><span class="hs-identifier hs-var">req_theta</span></a><span> </span><a href="#local-6989586621680224914"><span class="hs-identifier hs-var">matcher_tau</span></a><span>
</span><a name="line-460"></a><span>             </span><a name="local-6989586621680224916"><a href="#local-6989586621680224916"><span class="hs-identifier">matcher_id</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#mkExportedVanillaId"><span class="hs-identifier hs-var">mkExportedVanillaId</span></a><span> </span><a href="#local-6989586621680224910"><span class="hs-identifier hs-var">matcher_name</span></a><span> </span><a href="#local-6989586621680224915"><span class="hs-identifier hs-var">matcher_sigma</span></a><span>
</span><a name="line-461"></a><span>                             </span><span class="hs-comment">-- See Note [Exported LocalIds] in Id</span><span>
</span><a name="line-462"></a><span>
</span><a name="line-463"></a><span>             </span><a name="local-6989586621680224917"><a href="#local-6989586621680224917"><span class="hs-identifier">inst_wrap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#mkWpEvApps"><span class="hs-identifier hs-var">mkWpEvApps</span></a><span> </span><a href="#local-6989586621680224895"><span class="hs-identifier hs-var">prov_dicts</span></a><span> </span><a href="TcEvidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a><span> </span><a href="TcEvidence.html#mkWpTyApps"><span class="hs-identifier hs-var">mkWpTyApps</span></a><span> </span><a href="#local-6989586621680224893"><span class="hs-identifier hs-var">ex_tys</span></a><span>
</span><a name="line-464"></a><span>             </span><a name="local-6989586621680224918"><a href="#local-6989586621680224918"><span class="hs-identifier">cont'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a><span> </span><a href="HsUtils.html#nlHsApp"><span class="hs-identifier hs-var">nlHsApp</span></a><span> </span><span class="hs-special">(</span><a href="HsUtils.html#mkLHsWrap"><span class="hs-identifier hs-var">mkLHsWrap</span></a><span> </span><a href="#local-6989586621680224917"><span class="hs-identifier hs-var">inst_wrap</span></a><span> </span><span class="hs-special">(</span><a href="HsUtils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a><span> </span><a href="#local-6989586621680224912"><span class="hs-identifier hs-var">cont</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224906"><span class="hs-identifier hs-var">cont_args</span></a><span>
</span><a name="line-465"></a><span>
</span><a name="line-466"></a><span>             </span><a name="local-6989586621680224919"><a href="#local-6989586621680224919"><span class="hs-identifier">fail'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsUtils.html#nlHsApps"><span class="hs-identifier hs-var">nlHsApps</span></a><span> </span><a href="#local-6989586621680224913"><span class="hs-identifier hs-var">fail</span></a><span> </span><span class="hs-special">[</span><a href="HsUtils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a><span> </span><a href="MkId.html#voidPrimId"><span class="hs-identifier hs-var">voidPrimId</span></a><span class="hs-special">]</span><span>
</span><a name="line-467"></a><span>
</span><a name="line-468"></a><span>             </span><a name="local-6989586621680224920"><a href="#local-6989586621680224920"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="HsUtils.html#nlVarPat"><span class="hs-identifier hs-var">nlVarPat</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224911"><span class="hs-identifier hs-var">scrutinee</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224912"><span class="hs-identifier hs-var">cont</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224913"><span class="hs-identifier hs-var">fail</span></a><span class="hs-special">]</span><span>
</span><a name="line-469"></a><span>             </span><a name="local-6989586621680224921"><a href="#local-6989586621680224921"><span class="hs-identifier">lwpat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsPat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a><span> </span><a href="#local-6989586621680224898"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-470"></a><span>             </span><a name="local-6989586621680224922"><a href="#local-6989586621680224922"><span class="hs-identifier">cases</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="HsPat.html#isIrrefutableHsPat"><span class="hs-identifier hs-var">isIrrefutableHsPat</span></a><span> </span><a href="#local-6989586621680224887"><span class="hs-identifier hs-var">lpat</span></a><span>
</span><a name="line-471"></a><span>                     </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><a href="HsUtils.html#mkHsCaseAlt"><span class="hs-identifier hs-var">mkHsCaseAlt</span></a><span> </span><a href="#local-6989586621680224887"><span class="hs-identifier hs-var">lpat</span></a><span>  </span><a href="#local-6989586621680224918"><span class="hs-identifier hs-var">cont'</span></a><span class="hs-special">]</span><span>
</span><a name="line-472"></a><span>                     </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><a href="HsUtils.html#mkHsCaseAlt"><span class="hs-identifier hs-var">mkHsCaseAlt</span></a><span> </span><a href="#local-6989586621680224887"><span class="hs-identifier hs-var">lpat</span></a><span>  </span><a href="#local-6989586621680224918"><span class="hs-identifier hs-var">cont'</span></a><span class="hs-special">,</span><span>
</span><a name="line-473"></a><span>                           </span><a href="HsUtils.html#mkHsCaseAlt"><span class="hs-identifier hs-var">mkHsCaseAlt</span></a><span> </span><a href="#local-6989586621680224921"><span class="hs-identifier hs-var">lwpat</span></a><span> </span><a href="#local-6989586621680224919"><span class="hs-identifier hs-var">fail'</span></a><span class="hs-special">]</span><span>
</span><a name="line-474"></a><span>             </span><a name="local-6989586621680224923"><a href="#local-6989586621680224923"><span class="hs-identifier">body</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsUtils.html#mkLHsWrap"><span class="hs-identifier hs-var">mkLHsWrap</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkWpLet"><span class="hs-identifier hs-var">mkWpLet</span></a><span> </span><a href="#local-6989586621680224890"><span class="hs-identifier hs-var">req_ev_binds</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-475"></a><span>                    </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a><span> </span><a href="#local-6989586621680224887"><span class="hs-identifier hs-var">lpat</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-476"></a><span>                    </span><a href="HsExpr.html#HsCase"><span class="hs-identifier hs-var">HsCase</span></a><span> </span><span class="hs-special">(</span><a href="HsUtils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a><span> </span><a href="#local-6989586621680224911"><span class="hs-identifier hs-var">scrutinee</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-477"></a><span>                    </span><a href="HsExpr.html#MG"><span class="hs-identifier hs-var">MG</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a><span> </span><a href="#local-6989586621680224887"><span class="hs-identifier hs-var">lpat</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224922"><span class="hs-identifier hs-var">cases</span></a><span>
</span><a name="line-478"></a><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_arg_tys</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224898"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">]</span><span>
</span><a name="line-479"></a><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_res_ty</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224904"><span class="hs-identifier hs-var">res_ty</span></a><span>
</span><a name="line-480"></a><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_origin</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Generated"><span class="hs-identifier hs-var">Generated</span></a><span>
</span><a name="line-481"></a><span>                      </span><span class="hs-special">}</span><span>
</span><a name="line-482"></a><span>             </span><a name="local-6989586621680224924"><a href="#local-6989586621680224924"><span class="hs-identifier">body'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-483"></a><span>                     </span><a href="HsExpr.html#HsLam"><span class="hs-identifier hs-var">HsLam</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-484"></a><span>                     </span><a href="HsExpr.html#MG"><span class="hs-identifier hs-var">MG</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><span class="hs-special">[</span><a href="HsUtils.html#mkSimpleMatch"><span class="hs-identifier hs-var">mkSimpleMatch</span></a><span> </span><a href="HsExpr.html#LambdaExpr"><span class="hs-identifier hs-var">LambdaExpr</span></a><span>
</span><a name="line-485"></a><span>                                                        </span><a href="#local-6989586621680224920"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621680224923"><span class="hs-identifier hs-var">body</span></a><span class="hs-special">]</span><span>
</span><a name="line-486"></a><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_arg_tys</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224898"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224908"><span class="hs-identifier hs-var">cont_ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224909"><span class="hs-identifier hs-var">fail_ty</span></a><span class="hs-special">]</span><span>
</span><a name="line-487"></a><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_res_ty</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224904"><span class="hs-identifier hs-var">res_ty</span></a><span>
</span><a name="line-488"></a><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_origin</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Generated"><span class="hs-identifier hs-var">Generated</span></a><span>
</span><a name="line-489"></a><span>                       </span><span class="hs-special">}</span><span>
</span><a name="line-490"></a><span>             </span><a name="local-6989586621680224925"><a href="#local-6989586621680224925"><span class="hs-identifier">match</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsUtils.html#mkMatch"><span class="hs-identifier hs-var">mkMatch</span></a><span> </span><span class="hs-special">(</span><a href="HsUtils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224885"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="#local-6989586621680224886"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-491"></a><span>                             </span><span class="hs-special">(</span><a href="HsUtils.html#mkHsLams"><span class="hs-identifier hs-var">mkHsLams</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224901"><span class="hs-identifier hs-var">rr_tv</span></a><span class="hs-glyph">:</span><a href="#local-6989586621680224903"><span class="hs-identifier hs-var">res_tv</span></a><span class="hs-glyph">:</span><a href="#local-6989586621680224888"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">)</span><span>
</span><a name="line-492"></a><span>                             </span><a href="#local-6989586621680224891"><span class="hs-identifier hs-var">req_dicts</span></a><span> </span><a href="#local-6989586621680224924"><span class="hs-identifier hs-var">body'</span></a><span class="hs-special">)</span><span>
</span><a name="line-493"></a><span>                             </span><span class="hs-special">(</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="HsBinds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a><span class="hs-special">)</span><span>
</span><a name="line-494"></a><span>             </span><span class="hs-identifier">mg</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsExpr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">)</span><span>
</span><a name="line-495"></a><span>             </span><a name="local-6989586621680224926"><a href="#local-6989586621680224926"><span class="hs-identifier">mg</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsExpr.html#MG"><span class="hs-identifier hs-var">MG</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a><span> </span><a href="#local-6989586621680224925"><span class="hs-identifier hs-var">match</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224925"><span class="hs-identifier hs-var">match</span></a><span class="hs-special">]</span><span>
</span><a name="line-496"></a><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_arg_tys</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-497"></a><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_res_ty</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224904"><span class="hs-identifier hs-var">res_ty</span></a><span>
</span><a name="line-498"></a><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mg_origin</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Generated"><span class="hs-identifier hs-var">Generated</span></a><span>
</span><a name="line-499"></a><span>                    </span><span class="hs-special">}</span><span>
</span><a name="line-500"></a><span>
</span><a name="line-501"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224927"><a href="#local-6989586621680224927"><span class="hs-identifier">bind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsBinds.html#FunBind"><span class="hs-identifier hs-var">FunBind</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">fun_id</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224885"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="#local-6989586621680224916"><span class="hs-identifier hs-var">matcher_id</span></a><span>
</span><a name="line-502"></a><span>                           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_matches</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224926"><span class="hs-identifier hs-var">mg</span></a><span>
</span><a name="line-503"></a><span>                           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_co_fn</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#idHsWrapper"><span class="hs-identifier hs-var">idHsWrapper</span></a><span>
</span><a name="line-504"></a><span>                           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">bind_fvs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="NameSet.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a><span>
</span><a name="line-505"></a><span>                           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_tick</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-506"></a><span>             </span><a name="local-6989586621680224928"><a href="#local-6989586621680224928"><span class="hs-identifier">matcher_bind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="#local-6989586621680224927"><span class="hs-identifier hs-var">bind</span></a><span class="hs-special">)</span><span>
</span><a name="line-507"></a><span>
</span><a name="line-508"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcPatSynMatcher&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224886"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Id.html#idType"><span class="hs-identifier hs-var">idType</span></a><span> </span><a href="#local-6989586621680224916"><span class="hs-identifier hs-var">matcher_id</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-509"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcPatSynMatcher&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224928"><span class="hs-identifier hs-var">matcher_bind</span></a><span class="hs-special">)</span><span>
</span><a name="line-510"></a><span>
</span><a name="line-511"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="#local-6989586621680224916"><span class="hs-identifier hs-var">matcher_id</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224905"><span class="hs-identifier hs-var">is_unlifted</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224928"><span class="hs-identifier hs-var">matcher_bind</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-512"></a><span>
</span><a name="line-513"></a><span class="hs-identifier">mkPatSynRecSelBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="PatSyn.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a><span>
</span><a name="line-514"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- ^ Visible field labels</span><span>
</span><a name="line-515"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsBinds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span>
</span><a name="line-516"></a><a name="mkPatSynRecSelBinds"><a href="TcPatSyn.html#mkPatSynRecSelBinds"><span class="hs-identifier">mkPatSynRecSelBinds</span></a></a><span> </span><a name="local-6989586621680224929"><a href="#local-6989586621680224929"><span class="hs-identifier">ps</span></a></a><span> </span><a name="local-6989586621680224930"><a href="#local-6989586621680224930"><span class="hs-identifier">fields</span></a></a><span>
</span><a name="line-517"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="HsBinds.html#ValBindsOut"><span class="hs-identifier hs-var">ValBindsOut</span></a><span> </span><a href="#local-6989586621680224932"><span class="hs-identifier hs-var">selector_binds</span></a><span> </span><a href="#local-6989586621680224931"><span class="hs-identifier hs-var">sigs</span></a><span>
</span><a name="line-518"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-519"></a><span>    </span><span class="hs-special">(</span><a name="local-6989586621680224931"><a href="#local-6989586621680224931"><span class="hs-identifier">sigs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224932"><a href="#local-6989586621680224932"><span class="hs-identifier">selector_binds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680224933"><span class="hs-identifier hs-var">mkRecSel</span></a><span> </span><a href="#local-6989586621680224930"><span class="hs-identifier hs-var">fields</span></a><span class="hs-special">)</span><span>
</span><a name="line-520"></a><span>    </span><a name="local-6989586621680224933"><a href="#local-6989586621680224933"><span class="hs-identifier">mkRecSel</span></a></a><span> </span><a name="local-6989586621680224934"><a href="#local-6989586621680224934"><span class="hs-identifier">fld_lbl</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcTyDecls.html#mkOneRecordSelector"><span class="hs-identifier hs-var">mkOneRecordSelector</span></a><span> </span><span class="hs-special">[</span><a href="ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a><span> </span><a href="#local-6989586621680224929"><span class="hs-identifier hs-var">ps</span></a><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="IdInfo.html#RecSelPatSyn"><span class="hs-identifier hs-var">RecSelPatSyn</span></a><span> </span><a href="#local-6989586621680224929"><span class="hs-identifier hs-var">ps</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224934"><span class="hs-identifier hs-var">fld_lbl</span></a><span>
</span><a name="line-521"></a><span>
</span><a name="line-522"></a><span class="hs-identifier">isUnidirectional</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a><span> </span><a href="#local-6989586621680224744"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-523"></a><a name="isUnidirectional"><a href="TcPatSyn.html#isUnidirectional"><span class="hs-identifier">isUnidirectional</span></a></a><span> </span><a href="HsBinds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-524"></a><span class="hs-identifier">isUnidirectional</span><span> </span><a href="HsBinds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-525"></a><span class="hs-identifier">isUnidirectional</span><span> </span><a href="HsBinds.html#ExplicitBidirectional"><span class="hs-identifier hs-var">ExplicitBidirectional</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-526"></a><span>
</span><a name="line-527"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
         Constructing the &quot;builder&quot; Id
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-534"></a><span>
</span><a name="line-535"></a><span class="hs-identifier">mkPatSynBuilderId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a><span> </span><a href="#local-6989586621680224743"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span>
</span><a name="line-536"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVarBinder"><span class="hs-identifier hs-type">TyVarBinder</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a><span>
</span><a name="line-537"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVarBinder"><span class="hs-identifier hs-type">TyVarBinder</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a><span>
</span><a name="line-538"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span>
</span><a name="line-539"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-540"></a><a name="mkPatSynBuilderId"><a href="TcPatSyn.html#mkPatSynBuilderId"><span class="hs-identifier">mkPatSynBuilderId</span></a></a><span> </span><a name="local-6989586621680224935"><a href="#local-6989586621680224935"><span class="hs-identifier">dir</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680224936"><a href="#local-6989586621680224936"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-541"></a><span>                  </span><a name="local-6989586621680224937"><a href="#local-6989586621680224937"><span class="hs-identifier">univ_bndrs</span></a></a><span> </span><a name="local-6989586621680224938"><a href="#local-6989586621680224938"><span class="hs-identifier">req_theta</span></a></a><span> </span><a name="local-6989586621680224939"><a href="#local-6989586621680224939"><span class="hs-identifier">ex_bndrs</span></a></a><span> </span><a name="local-6989586621680224940"><a href="#local-6989586621680224940"><span class="hs-identifier">prov_theta</span></a></a><span>
</span><a name="line-542"></a><span>                  </span><a name="local-6989586621680224941"><a href="#local-6989586621680224941"><span class="hs-identifier">arg_tys</span></a></a><span> </span><a name="local-6989586621680224942"><a href="#local-6989586621680224942"><span class="hs-identifier">pat_ty</span></a></a><span>
</span><a name="line-543"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="TcPatSyn.html#isUnidirectional"><span class="hs-identifier hs-var">isUnidirectional</span></a><span> </span><a href="#local-6989586621680224935"><span class="hs-identifier hs-var">dir</span></a><span>
</span><a name="line-544"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-545"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>
</span><a name="line-546"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680224943"><a href="#local-6989586621680224943"><span class="hs-identifier">builder_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="BuildTyCl.html#newImplicitBinder"><span class="hs-identifier hs-var">newImplicitBinder</span></a><span> </span><a href="#local-6989586621680224936"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="OccName.html#mkBuilderOcc"><span class="hs-identifier hs-var">mkBuilderOcc</span></a><span>
</span><a name="line-547"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224944"><a href="#local-6989586621680224944"><span class="hs-identifier">theta</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224938"><span class="hs-identifier hs-var">req_theta</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-6989586621680224940"><span class="hs-identifier hs-var">prov_theta</span></a><span>
</span><a name="line-548"></a><span>             </span><a name="local-6989586621680224945"><a href="#local-6989586621680224945"><span class="hs-identifier">need_dummy_arg</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Type.html#isUnliftedType"><span class="hs-identifier hs-var">isUnliftedType</span></a><span> </span><a href="#local-6989586621680224942"><span class="hs-identifier hs-var">pat_ty</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><a href="#local-6989586621680224941"><span class="hs-identifier hs-var">arg_tys</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><a href="#local-6989586621680224944"><span class="hs-identifier hs-var">theta</span></a><span>
</span><a name="line-549"></a><span>             </span><a name="local-6989586621680224946"><a href="#local-6989586621680224946"><span class="hs-identifier">builder_sigma</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#add_void"><span class="hs-identifier hs-var">add_void</span></a><span> </span><a href="#local-6989586621680224945"><span class="hs-identifier hs-var">need_dummy_arg</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-550"></a><span>                              </span><a href="TyCoRep.html#mkForAllTys"><span class="hs-identifier hs-var">mkForAllTys</span></a><span> </span><a href="#local-6989586621680224937"><span class="hs-identifier hs-var">univ_bndrs</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-551"></a><span>                              </span><a href="TyCoRep.html#mkForAllTys"><span class="hs-identifier hs-var">mkForAllTys</span></a><span> </span><a href="#local-6989586621680224939"><span class="hs-identifier hs-var">ex_bndrs</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-552"></a><span>                              </span><a href="TyCoRep.html#mkFunTys"><span class="hs-identifier hs-var">mkFunTys</span></a><span> </span><a href="#local-6989586621680224944"><span class="hs-identifier hs-var">theta</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-553"></a><span>                              </span><a href="TyCoRep.html#mkFunTys"><span class="hs-identifier hs-var">mkFunTys</span></a><span> </span><a href="#local-6989586621680224941"><span class="hs-identifier hs-var">arg_tys</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-554"></a><span>                              </span><a href="#local-6989586621680224942"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-555"></a><span>             </span><a name="local-6989586621680224947"><a href="#local-6989586621680224947"><span class="hs-identifier">builder_id</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#mkExportedVanillaId"><span class="hs-identifier hs-var">mkExportedVanillaId</span></a><span> </span><a href="#local-6989586621680224943"><span class="hs-identifier hs-var">builder_name</span></a><span> </span><a href="#local-6989586621680224946"><span class="hs-identifier hs-var">builder_sigma</span></a><span>
</span><a name="line-556"></a><span>              </span><span class="hs-comment">-- See Note [Exported LocalIds] in Id</span><span>
</span><a name="line-557"></a><span>
</span><a name="line-558"></a><span>             </span><a name="local-6989586621680224948"><a href="#local-6989586621680224948"><span class="hs-identifier">builder_id'</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">`</span><a href="IdInfo.html#setLevityInfoWithType"><span class="hs-identifier hs-var">setLevityInfoWithType</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621680224942"><span class="hs-identifier hs-var">pat_ty</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224947"><span class="hs-identifier hs-var">builder_id</span></a><span>
</span><a name="line-559"></a><span>
</span><a name="line-560"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224948"><span class="hs-identifier hs-var">builder_id'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224945"><span class="hs-identifier hs-var">need_dummy_arg</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-561"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-562"></a><span>
</span><a name="line-563"></a><span class="hs-identifier">tcPatSynBuilderBind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsBinds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span>
</span><a name="line-564"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="HsBinds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">)</span><span>
</span><a name="line-565"></a><span class="hs-comment">-- See Note [Matchers and builders for pattern synonyms] in PatSyn</span><span>
</span><a name="line-566"></a><a name="tcPatSynBuilderBind"><a href="TcPatSyn.html#tcPatSynBuilderBind"><span class="hs-identifier">tcPatSynBuilderBind</span></a></a><span> </span><span class="hs-special">(</span><a href="HsBinds.html#PSB"><span class="hs-identifier hs-var">PSB</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">psb_id</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680224949"><a href="#local-6989586621680224949"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-6989586621680224950"><a href="#local-6989586621680224950"><span class="hs-identifier">name</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_def</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224951"><a href="#local-6989586621680224951"><span class="hs-identifier">lpat</span></a></a><span>
</span><a name="line-567"></a><span>                         </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_dir</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224952"><a href="#local-6989586621680224952"><span class="hs-identifier">dir</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">psb_args</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224953"><a href="#local-6989586621680224953"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-568"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="TcPatSyn.html#isUnidirectional"><span class="hs-identifier hs-var">isUnidirectional</span></a><span> </span><a href="#local-6989586621680224952"><span class="hs-identifier hs-var">dir</span></a><span>
</span><a name="line-569"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a><span>
</span><a name="line-570"></a><span>
</span><a name="line-571"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a><span> </span><a name="local-6989586621680224974"><a href="#local-6989586621680224974"><span class="hs-identifier">why</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224954"><span class="hs-identifier hs-var">mb_match_group</span></a><span>       </span><span class="hs-comment">-- Can't invert the pattern</span><span>
</span><a name="line-572"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a><span> </span><a href="#local-6989586621680224951"><span class="hs-identifier hs-var">lpat</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-573"></a><span>    </span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Invalid right-hand side of bidirectional pattern synonym&quot;</span><span>
</span><a name="line-574"></a><span>                 </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224950"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a><span class="hs-special">)</span><span>
</span><a name="line-575"></a><span>              </span><span class="hs-number">2</span><span> </span><a href="#local-6989586621680224974"><span class="hs-identifier hs-var">why</span></a><span>
</span><a name="line-576"></a><span>         </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;RHS pattern:&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224951"><span class="hs-identifier hs-var">lpat</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-577"></a><span>
</span><a name="line-578"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a><span> </span><a name="local-6989586621680224975"><a href="#local-6989586621680224975"><span class="hs-identifier">match_group</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224954"><span class="hs-identifier hs-var">mb_match_group</span></a><span>  </span><span class="hs-comment">-- Bidirectional</span><span>
</span><a name="line-579"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680224976"><a href="#local-6989586621680224976"><span class="hs-identifier">patsyn</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcEnv.html#tcLookupPatSyn"><span class="hs-identifier hs-var">tcLookupPatSyn</span></a><span> </span><a href="#local-6989586621680224950"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-580"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a name="local-6989586621680224977"><a href="#local-6989586621680224977"><span class="hs-identifier">builder_id</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224978"><a href="#local-6989586621680224978"><span class="hs-identifier">need_dummy_arg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="PatSyn.html#patSynBuilder"><span class="hs-identifier hs-var">patSynBuilder</span></a><span> </span><a href="#local-6989586621680224976"><span class="hs-identifier hs-var">patsyn</span></a><span>
</span><a name="line-581"></a><span>                   </span><span class="hs-comment">-- Bidirectional, so patSynBuilder returns Just</span><span>
</span><a name="line-582"></a><span>
</span><a name="line-583"></a><span>             </span><a name="local-6989586621680224979"><a href="#local-6989586621680224979"><span class="hs-identifier">match_group'</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680224978"><span class="hs-identifier hs-var">need_dummy_arg</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224957"><span class="hs-identifier hs-var">add_dummy_arg</span></a><span> </span><a href="#local-6989586621680224975"><span class="hs-identifier hs-var">match_group</span></a><span>
</span><a name="line-584"></a><span>                          </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224975"><span class="hs-identifier hs-var">match_group</span></a><span>
</span><a name="line-585"></a><span>
</span><a name="line-586"></a><span>             </span><a name="local-6989586621680224980"><a href="#local-6989586621680224980"><span class="hs-identifier">bind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsBinds.html#FunBind"><span class="hs-identifier hs-var">FunBind</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fun_id</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224949"><span class="hs-identifier hs-var">loc</span></a><span> </span><span class="hs-special">(</span><a href="Id.html#idName"><span class="hs-identifier hs-var">idName</span></a><span> </span><a href="#local-6989586621680224977"><span class="hs-identifier hs-var">builder_id</span></a><span class="hs-special">)</span><span>
</span><a name="line-587"></a><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_matches</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224979"><span class="hs-identifier hs-var">match_group'</span></a><span>
</span><a name="line-588"></a><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_co_fn</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#idHsWrapper"><span class="hs-identifier hs-var">idHsWrapper</span></a><span>
</span><a name="line-589"></a><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">bind_fvs</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="PlaceHolder.html#placeHolderNamesTc"><span class="hs-identifier hs-var">placeHolderNamesTc</span></a><span>
</span><a name="line-590"></a><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_tick</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-591"></a><span>
</span><a name="line-592"></a><span>             </span><a name="local-6989586621680224981"><a href="#local-6989586621680224981"><span class="hs-identifier">sig</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcSigs.html#completeSigFromId"><span class="hs-identifier hs-var">completeSigFromId</span></a><span> </span><span class="hs-special">(</span><a href="TcType.html#PatSynCtxt"><span class="hs-identifier hs-var">PatSynCtxt</span></a><span> </span><a href="#local-6989586621680224950"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680224977"><span class="hs-identifier hs-var">builder_id</span></a><span>
</span><a name="line-593"></a><span>
</span><a name="line-594"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcPatSynBuilderBind {&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-595"></a><span>         </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224976"><span class="hs-identifier hs-var">patsyn</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224977"><span class="hs-identifier hs-var">builder_id</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Id.html#idType"><span class="hs-identifier hs-var">idType</span></a><span> </span><a href="#local-6989586621680224977"><span class="hs-identifier hs-var">builder_id</span></a><span class="hs-special">)</span><span>
</span><a name="line-596"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680224982"><a href="#local-6989586621680224982"><span class="hs-identifier">builder_binds</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcBinds.html#tcPolyCheck"><span class="hs-identifier hs-var">tcPolyCheck</span></a><span> </span><a href="TcSigs.html#emptyPragEnv"><span class="hs-identifier hs-var">emptyPragEnv</span></a><span> </span><a href="#local-6989586621680224981"><span class="hs-identifier hs-var">sig</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="#local-6989586621680224980"><span class="hs-identifier hs-var">bind</span></a><span class="hs-special">)</span><span>
</span><a name="line-597"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a><span> </span><span class="hs-string">&quot;tcPatSynBuilderBind }&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224982"><span class="hs-identifier hs-var">builder_binds</span></a><span>
</span><a name="line-598"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-6989586621680224982"><span class="hs-identifier hs-var">builder_binds</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-599"></a><span>
</span><a name="line-600"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;tcPatSynBuilderBind&quot;</span><span>  </span><span class="hs-comment">-- Both cases dealt with</span><span>
</span><a name="line-601"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-602"></a><span>    </span><a name="local-6989586621680224954"><a href="#local-6989586621680224954"><span class="hs-identifier">mb_match_group</span></a></a><span>
</span><a name="line-603"></a><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680224952"><span class="hs-identifier hs-var">dir</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-604"></a><span>           </span><a href="HsBinds.html#ExplicitBidirectional"><span class="hs-identifier hs-var">ExplicitBidirectional</span></a><span> </span><a name="local-6989586621680224958"><a href="#local-6989586621680224958"><span class="hs-identifier">explicit_mg</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a><span> </span><a href="#local-6989586621680224958"><span class="hs-identifier hs-var">explicit_mg</span></a><span>
</span><a name="line-605"></a><span>           </span><a href="HsBinds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="#local-6989586621680224955"><span class="hs-identifier hs-var">mk_mg</span></a><span> </span><span class="hs-special">(</span><a href="TcPatSyn.html#tcPatToExpr"><span class="hs-identifier hs-var">tcPatToExpr</span></a><span> </span><a href="#local-6989586621680224950"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-6989586621680224956"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621680224951"><span class="hs-identifier hs-var">lpat</span></a><span class="hs-special">)</span><span>
</span><a name="line-606"></a><span>           </span><a href="HsBinds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;tcPatSynBuilderBind&quot;</span><span>
</span><a name="line-607"></a><span>
</span><a name="line-608"></a><span>    </span><span class="hs-identifier">mk_mg</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsExpr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-609"></a><span>    </span><a name="local-6989586621680224955"><a href="#local-6989586621680224955"><span class="hs-identifier">mk_mg</span></a></a><span> </span><a name="local-6989586621680224959"><a href="#local-6989586621680224959"><span class="hs-identifier">body</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsUtils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a><span> </span><a href="BasicTypes.html#Generated"><span class="hs-identifier hs-var">Generated</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224961"><span class="hs-identifier hs-var">builder_match</span></a><span class="hs-special">]</span><span>
</span><a name="line-610"></a><span>             </span><span class="hs-keyword">where</span><span>
</span><a name="line-611"></a><span>               </span><a name="local-6989586621680224960"><a href="#local-6989586621680224960"><span class="hs-identifier">builder_args</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224962"><span class="hs-identifier hs-var">loc</span></a><span> </span><span class="hs-special">(</span><a href="HsPat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224962"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="#local-6989586621680224963"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680224962"><a href="#local-6989586621680224962"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-6989586621680224963"><a href="#local-6989586621680224963"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224956"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">]</span><span>
</span><a name="line-612"></a><span>               </span><a name="local-6989586621680224961"><a href="#local-6989586621680224961"><span class="hs-identifier">builder_match</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsUtils.html#mkMatch"><span class="hs-identifier hs-var">mkMatch</span></a><span> </span><span class="hs-special">(</span><a href="HsUtils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224949"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="#local-6989586621680224950"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-613"></a><span>                                       </span><a href="#local-6989586621680224960"><span class="hs-identifier hs-var">builder_args</span></a><span> </span><a href="#local-6989586621680224959"><span class="hs-identifier hs-var">body</span></a><span>
</span><a name="line-614"></a><span>                                       </span><span class="hs-special">(</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="HsBinds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a><span class="hs-special">)</span><span>
</span><a name="line-615"></a><span>
</span><a name="line-616"></a><span>    </span><a name="local-6989586621680224956"><a href="#local-6989586621680224956"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680224953"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-617"></a><span>              </span><a href="HsTypes.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a><span> </span><a name="local-6989586621680224964"><a href="#local-6989586621680224964"><span class="hs-identifier">args</span></a></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680224964"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-618"></a><span>              </span><a href="HsTypes.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a><span> </span><a name="local-6989586621680224965"><a href="#local-6989586621680224965"><span class="hs-identifier">arg1</span></a></a><span> </span><a name="local-6989586621680224966"><a href="#local-6989586621680224966"><span class="hs-identifier">arg2</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621680224965"><span class="hs-identifier hs-var">arg1</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224966"><span class="hs-identifier hs-var">arg2</span></a><span class="hs-special">]</span><span>
</span><a name="line-619"></a><span>              </span><a href="HsTypes.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a><span> </span><a name="local-6989586621680224967"><a href="#local-6989586621680224967"><span class="hs-identifier">args</span></a></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-identifier">recordPatSynPatVar</span><span> </span><a href="#local-6989586621680224967"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-620"></a><span>
</span><a name="line-621"></a><span>    </span><span class="hs-identifier">add_dummy_arg</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsExpr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-622"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsExpr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-623"></a><span>    </span><a name="local-6989586621680224957"><a href="#local-6989586621680224957"><span class="hs-identifier">add_dummy_arg</span></a></a><span> </span><a name="local-6989586621680224968"><a href="#local-6989586621680224968"><span class="hs-identifier">mg</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsExpr.html#MG"><span class="hs-identifier hs-var">MG</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680224969"><a href="#local-6989586621680224969"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-special">[</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680224970"><a href="#local-6989586621680224970"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-6989586621680224971"><a href="#local-6989586621680224971"><span class="hs-identifier">match</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsExpr.html#Match"><span class="hs-identifier hs-var">Match</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">m_pats</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680224972"><a href="#local-6989586621680224972"><span class="hs-identifier">pats</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-624"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224968"><span class="hs-identifier hs-var">mg</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224969"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">[</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680224970"><span class="hs-identifier hs-var">loc</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224971"><span class="hs-identifier hs-var">match</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">m_pats</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsUtils.html#nlWildPatName"><span class="hs-identifier hs-var">nlWildPatName</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621680224972"><span class="hs-identifier hs-var">pats</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-625"></a><span>    </span><span class="hs-identifier">add_dummy_arg</span><span> </span><a name="local-6989586621680224973"><a href="#local-6989586621680224973"><span class="hs-identifier">other_mg</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;add_dummy_arg&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-626"></a><span>                             </span><a href="HsExpr.html#pprMatches"><span class="hs-identifier hs-var">pprMatches</span></a><span> </span><a href="#local-6989586621680224973"><span class="hs-identifier hs-var">other_mg</span></a><span>
</span><a name="line-627"></a><span>
</span><a name="line-628"></a><span class="hs-identifier">tcPatSynBuilderOcc</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="PatSyn.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a><span> </span><a href="HsExtension.html#GhcTcId"><span class="hs-identifier hs-type">GhcTcId</span></a><span class="hs-special">,</span><span> </span><a href="TcType.html#TcSigmaType"><span class="hs-identifier hs-type">TcSigmaType</span></a><span class="hs-special">)</span><span>
</span><a name="line-629"></a><span class="hs-comment">-- monadic only for failure</span><span>
</span><a name="line-630"></a><a name="tcPatSynBuilderOcc"><a href="TcPatSyn.html#tcPatSynBuilderOcc"><span class="hs-identifier">tcPatSynBuilderOcc</span></a></a><span> </span><a name="local-6989586621680224983"><a href="#local-6989586621680224983"><span class="hs-identifier">ps</span></a></a><span>
</span><a name="line-631"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a name="local-6989586621680224986"><a href="#local-6989586621680224986"><span class="hs-identifier">builder_id</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680224987"><a href="#local-6989586621680224987"><span class="hs-identifier">add_void_arg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224985"><span class="hs-identifier hs-var">builder</span></a><span>
</span><a name="line-632"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621680224988"><a href="#local-6989586621680224988"><span class="hs-identifier">builder_expr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HsExpr.html#HsConLikeOut"><span class="hs-identifier hs-var">HsConLikeOut</span></a><span> </span><span class="hs-special">(</span><a href="ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a><span> </span><a href="#local-6989586621680224983"><span class="hs-identifier hs-var">ps</span></a><span class="hs-special">)</span><span>
</span><a name="line-633"></a><span>        </span><a name="local-6989586621680224989"><a href="#local-6989586621680224989"><span class="hs-identifier">builder_ty</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#idType"><span class="hs-identifier hs-var">idType</span></a><span> </span><a href="#local-6989586621680224986"><span class="hs-identifier hs-var">builder_id</span></a><span>
</span><a name="line-634"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-635"></a><span>    </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621680224987"><span class="hs-identifier hs-var">add_void_arg</span></a><span>
</span><a name="line-636"></a><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span> </span><a href="#local-6989586621680224988"><span class="hs-identifier hs-var">builder_expr</span></a><span>   </span><span class="hs-comment">-- still just return builder_expr; the void# arg is added</span><span>
</span><a name="line-637"></a><span>                          </span><span class="hs-comment">-- by dsConLike in the desugarer</span><span>
</span><a name="line-638"></a><span>         </span><span class="hs-special">,</span><span> </span><a href="TcType.html#tcFunResultTy"><span class="hs-identifier hs-var">tcFunResultTy</span></a><span> </span><a href="#local-6989586621680224989"><span class="hs-identifier hs-var">builder_ty</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-639"></a><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680224988"><span class="hs-identifier hs-var">builder_expr</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680224989"><span class="hs-identifier hs-var">builder_ty</span></a><span class="hs-special">)</span><span>
</span><a name="line-640"></a><span>
</span><a name="line-641"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>  </span><span class="hs-comment">-- Unidirectional</span><span>
</span><a name="line-642"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#nonBidirectionalErr"><span class="hs-identifier hs-var">nonBidirectionalErr</span></a><span> </span><a href="#local-6989586621680224984"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-643"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-644"></a><span>    </span><a name="local-6989586621680224984"><a href="#local-6989586621680224984"><span class="hs-identifier">name</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="PatSyn.html#patSynName"><span class="hs-identifier hs-var">patSynName</span></a><span> </span><a href="#local-6989586621680224983"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-645"></a><span>    </span><a name="local-6989586621680224985"><a href="#local-6989586621680224985"><span class="hs-identifier">builder</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="PatSyn.html#patSynBuilder"><span class="hs-identifier hs-var">patSynBuilder</span></a><span> </span><a href="#local-6989586621680224983"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-646"></a><span>
</span><a name="line-647"></a><span class="hs-identifier">add_void</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span>
</span><a name="line-648"></a><a name="add_void"><a href="TcPatSyn.html#add_void"><span class="hs-identifier">add_void</span></a></a><span> </span><a name="local-6989586621680224990"><a href="#local-6989586621680224990"><span class="hs-identifier">need_dummy_arg</span></a></a><span> </span><a name="local-6989586621680224991"><a href="#local-6989586621680224991"><span class="hs-identifier">ty</span></a></a><span>
</span><a name="line-649"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680224990"><span class="hs-identifier hs-var">need_dummy_arg</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a><span> </span><a href="TysPrim.html#voidPrimTy"><span class="hs-identifier hs-var">voidPrimTy</span></a><span> </span><a href="#local-6989586621680224991"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-650"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224991"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-651"></a><span>
</span><a name="line-652"></a><span class="hs-identifier">tcPatToExpr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span>
</span><a name="line-653"></a><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a><span> </span><a href="ErrUtils.html#MsgDoc"><span class="hs-identifier hs-type">MsgDoc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-654"></a><span class="hs-comment">-- Given a /pattern/, return an /expression/ that builds a value</span><span>
</span><a name="line-655"></a><span class="hs-comment">-- that matches the pattern.  E.g. if the pattern is (Just [x]),</span><span>
</span><a name="line-656"></a><span class="hs-comment">-- the expression is (Just [x]).  They look the same, but the</span><span>
</span><a name="line-657"></a><span class="hs-comment">-- input uses constructors from HsPat and the output uses constructors</span><span>
</span><a name="line-658"></a><span class="hs-comment">-- from HsExpr.</span><span>
</span><a name="line-659"></a><span class="hs-comment">--</span><span>
</span><a name="line-660"></a><span class="hs-comment">-- Returns (Left r) if the pattern is not invertible, for reason r.</span><span>
</span><a name="line-661"></a><span class="hs-comment">-- See Note [Builder for a bidirectional pattern synonym]</span><span>
</span><a name="line-662"></a><a name="tcPatToExpr"><a href="TcPatSyn.html#tcPatToExpr"><span class="hs-identifier">tcPatToExpr</span></a></a><span> </span><a name="local-6989586621680224992"><a href="#local-6989586621680224992"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621680224993"><a href="#local-6989586621680224993"><span class="hs-identifier">args</span></a></a><span> </span><a name="local-6989586621680224994"><a href="#local-6989586621680224994"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680224994"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-663"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-664"></a><span>    </span><a name="local-6989586621680224995"><a href="#local-6989586621680224995"><span class="hs-identifier">lhsVars</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="NameSet.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680224993"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">)</span><span>
</span><a name="line-665"></a><span>
</span><a name="line-666"></a><span>    </span><span class="hs-comment">-- Make a prefix con for prefix and infix patterns for simplicity</span><span>
</span><a name="line-667"></a><span>    </span><span class="hs-identifier">mkPrefixConExpr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">]</span><span>
</span><a name="line-668"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a><span> </span><a href="ErrUtils.html#MsgDoc"><span class="hs-identifier hs-type">MsgDoc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-669"></a><span>    </span><a name="local-6989586621680224996"><a href="#local-6989586621680224996"><span class="hs-identifier">mkPrefixConExpr</span></a></a><span> </span><a name="local-6989586621680225003"><a href="#local-6989586621680225003"><span class="hs-identifier">lcon</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680225004"><a href="#local-6989586621680225004"><span class="hs-identifier">loc</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><a name="local-6989586621680225005"><a href="#local-6989586621680225005"><span class="hs-identifier">pats</span></a></a><span>
</span><a name="line-670"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680225006"><a href="#local-6989586621680225006"><span class="hs-identifier">exprs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225005"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-671"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621680225007"><a href="#local-6989586621680225007"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621680225008"><a href="#local-6989586621680225008"><span class="hs-identifier">y</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsExpr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680225004"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="#local-6989586621680225007"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680225008"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span>
</span><a name="line-672"></a><span>                           </span><span class="hs-special">(</span><a href="HsExpr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a><span> </span><a href="#local-6989586621680225003"><span class="hs-identifier hs-var">lcon</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680225006"><span class="hs-identifier hs-var">exprs</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-673"></a><span>
</span><a name="line-674"></a><span>    </span><span class="hs-identifier">mkRecordConExpr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HsPat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-special">(</span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-675"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a><span> </span><a href="ErrUtils.html#MsgDoc"><span class="hs-identifier hs-type">MsgDoc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-676"></a><span>    </span><a name="local-6989586621680224997"><a href="#local-6989586621680224997"><span class="hs-identifier">mkRecordConExpr</span></a></a><span> </span><a name="local-6989586621680225009"><a href="#local-6989586621680225009"><span class="hs-identifier">con</span></a></a><span> </span><a name="local-6989586621680225010"><a href="#local-6989586621680225010"><span class="hs-identifier">fields</span></a></a><span>
</span><a name="line-677"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680225011"><a href="#local-6989586621680225011"><span class="hs-identifier">exprFields</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225010"><span class="hs-identifier hs-var">fields</span></a><span>
</span><a name="line-678"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#RecordCon"><span class="hs-identifier hs-var">RecordCon</span></a><span> </span><a href="#local-6989586621680225009"><span class="hs-identifier hs-var">con</span></a><span> </span><a href="PlaceHolder.html#PlaceHolder"><span class="hs-identifier hs-var">PlaceHolder</span></a><span> </span><a href="HsExpr.html#noPostTcExpr"><span class="hs-identifier hs-var">noPostTcExpr</span></a><span> </span><a href="#local-6989586621680225011"><span class="hs-identifier hs-var">exprFields</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-679"></a><span>
</span><a name="line-680"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a><span> </span><a href="ErrUtils.html#MsgDoc"><span class="hs-identifier hs-type">MsgDoc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-681"></a><span>    </span><a name="local-6989586621680224998"><a href="#local-6989586621680224998"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680225012"><a href="#local-6989586621680225012"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-6989586621680225013"><a href="#local-6989586621680225013"><span class="hs-identifier">p</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680225012"><span class="hs-identifier hs-var">loc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-6989586621680224999"><span class="hs-identifier hs-var">go1</span></a><span> </span><a href="#local-6989586621680225013"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-682"></a><span>
</span><a name="line-683"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a><span> </span><a href="ErrUtils.html#MsgDoc"><span class="hs-identifier hs-type">MsgDoc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span class="hs-special">)</span><span>
</span><a name="line-684"></a><span>    </span><a name="local-6989586621680224999"><a href="#local-6989586621680224999"><span class="hs-identifier">go1</span></a></a><span> </span><span class="hs-special">(</span><a href="HsPat.html#ConPatIn"><span class="hs-identifier hs-var">ConPatIn</span></a><span> </span><a name="local-6989586621680225014"><a href="#local-6989586621680225014"><span class="hs-identifier">con</span></a></a><span> </span><a name="local-6989586621680225015"><a href="#local-6989586621680225015"><span class="hs-identifier">info</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-685"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680225015"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-686"></a><span>          </span><a href="HsTypes.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a><span> </span><a name="local-6989586621680225016"><a href="#local-6989586621680225016"><span class="hs-identifier">ps</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680224996"><span class="hs-identifier hs-var">mkPrefixConExpr</span></a><span> </span><a href="#local-6989586621680225014"><span class="hs-identifier hs-var">con</span></a><span> </span><a href="#local-6989586621680225016"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-687"></a><span>          </span><a href="HsTypes.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a><span> </span><a name="local-6989586621680225017"><a href="#local-6989586621680225017"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621680225018"><a href="#local-6989586621680225018"><span class="hs-identifier">r</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680224996"><span class="hs-identifier hs-var">mkPrefixConExpr</span></a><span> </span><a href="#local-6989586621680225014"><span class="hs-identifier hs-var">con</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680225017"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">,</span><a href="#local-6989586621680225018"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">]</span><span>
</span><a name="line-688"></a><span>          </span><a href="HsTypes.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a><span> </span><a name="local-6989586621680225019"><a href="#local-6989586621680225019"><span class="hs-identifier">fields</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680224997"><span class="hs-identifier hs-var">mkRecordConExpr</span></a><span> </span><a href="#local-6989586621680225014"><span class="hs-identifier hs-var">con</span></a><span> </span><a href="#local-6989586621680225019"><span class="hs-identifier hs-var">fields</span></a><span>
</span><a name="line-689"></a><span>
</span><a name="line-690"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SigPatIn"><span class="hs-identifier hs-var">SigPatIn</span></a><span> </span><a name="local-6989586621680225020"><a href="#local-6989586621680225020"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224999"><span class="hs-identifier hs-var">go1</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680225020"><span class="hs-identifier hs-var">pat</span></a><span class="hs-special">)</span><span>
</span><a name="line-691"></a><span>        </span><span class="hs-comment">-- See Note [Type signatures and the builder expression]</span><span>
</span><a name="line-692"></a><span>
</span><a name="line-693"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a name="local-6989586621680225021"><a href="#local-6989586621680225021"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621680225022"><a href="#local-6989586621680225022"><span class="hs-identifier">var</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-694"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680225022"><span class="hs-identifier hs-var">var</span></a><span> </span><span class="hs-special">`</span><a href="NameSet.html#elemNameSet"><span class="hs-identifier hs-var">elemNameSet</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621680224995"><span class="hs-identifier hs-var">lhsVars</span></a><span>
</span><a name="line-695"></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><a href="#local-6989586621680225021"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621680225022"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span>
</span><a name="line-696"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>
</span><a name="line-697"></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225022"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;is not bound by the LHS of the pattern synonym&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-698"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#ParPat"><span class="hs-identifier hs-var">ParPat</span></a><span> </span><a name="local-6989586621680225023"><a href="#local-6989586621680225023"><span class="hs-identifier">pat</span></a></a><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="HsExpr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225023"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-699"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#PArrPat"><span class="hs-identifier hs-var">PArrPat</span></a><span> </span><a name="local-6989586621680225024"><a href="#local-6989586621680225024"><span class="hs-identifier">pats</span></a></a><span> </span><a name="local-6989586621680225025"><a href="#local-6989586621680225025"><span class="hs-identifier">ptt</span></a></a><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680225026"><a href="#local-6989586621680225026"><span class="hs-identifier">exprs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225024"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-700"></a><span>                                         </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#ExplicitPArr"><span class="hs-identifier hs-var">ExplicitPArr</span></a><span> </span><a href="#local-6989586621680225025"><span class="hs-identifier hs-var">ptt</span></a><span> </span><a href="#local-6989586621680225026"><span class="hs-identifier hs-var">exprs</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-701"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225027"><a href="#local-6989586621680225027"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a><span> </span><a name="local-6989586621680225028"><a href="#local-6989586621680225028"><span class="hs-identifier">pats</span></a></a><span> </span><a name="local-6989586621680225029"><a href="#local-6989586621680225029"><span class="hs-identifier">ptt</span></a></a><span> </span><a name="local-6989586621680225030"><a href="#local-6989586621680225030"><span class="hs-identifier">reb</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-702"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680225030"><span class="hs-identifier hs-var">reb</span></a><span>              </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680225031"><a href="#local-6989586621680225031"><span class="hs-identifier">exprs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225028"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-703"></a><span>                                         </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a><span> </span><a href="#local-6989586621680225029"><span class="hs-identifier hs-var">ptt</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><a href="#local-6989586621680225031"><span class="hs-identifier hs-var">exprs</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-704"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>                   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225002"><span class="hs-identifier hs-var">notInvertibleListPat</span></a><span> </span><a href="#local-6989586621680225027"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-705"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a><span> </span><a name="local-6989586621680225032"><a href="#local-6989586621680225032"><span class="hs-identifier">pats</span></a></a><span> </span><a name="local-6989586621680225033"><a href="#local-6989586621680225033"><span class="hs-identifier">box</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680225034"><a href="#local-6989586621680225034"><span class="hs-identifier">exprs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-6989586621680224998"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225032"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-706"></a><span>                                         </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#ExplicitTuple"><span class="hs-identifier hs-var">ExplicitTuple</span></a><span>
</span><a name="line-707"></a><span>                                              </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="HsExpr.html#Present"><span class="hs-identifier hs-var">Present</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680225034"><span class="hs-identifier hs-var">exprs</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680225033"><span class="hs-identifier hs-var">box</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-708"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SumPat"><span class="hs-identifier hs-var">SumPat</span></a><span> </span><a name="local-6989586621680225035"><a href="#local-6989586621680225035"><span class="hs-identifier">pat</span></a></a><span> </span><a name="local-6989586621680225036"><a href="#local-6989586621680225036"><span class="hs-identifier">alt</span></a></a><span> </span><a name="local-6989586621680225037"><a href="#local-6989586621680225037"><span class="hs-identifier">arity</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621680225038"><a href="#local-6989586621680225038"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680224999"><span class="hs-identifier hs-var">go1</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680225035"><span class="hs-identifier hs-var">pat</span></a><span class="hs-special">)</span><span>
</span><a name="line-709"></a><span>                                         </span><span class="hs-special">;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#ExplicitSum"><span class="hs-identifier hs-var">ExplicitSum</span></a><span> </span><a href="#local-6989586621680225036"><span class="hs-identifier hs-var">alt</span></a><span> </span><a href="#local-6989586621680225037"><span class="hs-identifier hs-var">arity</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><a href="#local-6989586621680225038"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span> </span><a href="PlaceHolder.html#PlaceHolder"><span class="hs-identifier hs-var">PlaceHolder</span></a><span>
</span><a name="line-710"></a><span>                                         </span><span class="hs-special">}</span><span>
</span><a name="line-711"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#LitPat"><span class="hs-identifier hs-var">LitPat</span></a><span> </span><a name="local-6989586621680225039"><a href="#local-6989586621680225039"><span class="hs-identifier">lit</span></a></a><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a><span> </span><a href="#local-6989586621680225039"><span class="hs-identifier hs-var">lit</span></a><span>
</span><a name="line-712"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#NPat"><span class="hs-identifier hs-var">NPat</span></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225040"><a href="#local-6989586621680225040"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621680225041"><a href="#local-6989586621680225041"><span class="hs-identifier">mb_neg</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-713"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-6989586621680225042"><a href="#local-6989586621680225042"><span class="hs-identifier">neg</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680225041"><span class="hs-identifier hs-var">mb_neg</span></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsUtils.html#nlHsSyntaxApps"><span class="hs-identifier hs-var">nlHsSyntaxApps</span></a><span> </span><a href="#local-6989586621680225042"><span class="hs-identifier hs-var">neg</span></a><span> </span><span class="hs-special">[</span><a href="SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a><span> </span><a href="#local-6989586621680225040"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-714"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>                 </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HsExpr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a><span> </span><a href="#local-6989586621680225040"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-715"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#ConPatOut"><span class="hs-identifier hs-var">ConPatOut</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;ConPatOut in output of renamer&quot;</span><span>
</span><a name="line-716"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SigPatOut"><span class="hs-identifier hs-var">SigPatOut</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;SigPatOut in output of renamer&quot;</span><span>
</span><a name="line-717"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#CoPat"><span class="hs-identifier hs-var">CoPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;CoPat in output of renamer&quot;</span><span>
</span><a name="line-718"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsSpliced"><span class="hs-identifier hs-var">HsSpliced</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsSplicedPat"><span class="hs-identifier hs-var">HsSplicedPat</span></a><span> </span><a name="local-6989586621680225043"><a href="#local-6989586621680225043"><span class="hs-identifier">pat</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-719"></a><span>                                    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680224999"><span class="hs-identifier hs-var">go1</span></a><span> </span><a href="#local-6989586621680225043"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-720"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsSpliced"><span class="hs-identifier hs-var">HsSpliced</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;Invalid splice variety&quot;</span><span>
</span><a name="line-721"></a><span>
</span><a name="line-722"></a><span>    </span><span class="hs-comment">-- The following patterns are not invertible.</span><span>
</span><a name="line-723"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225044"><a href="#local-6989586621680225044"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#BangPat"><span class="hs-identifier hs-var">BangPat</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225044"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-comment">-- #14112</span><span>
</span><a name="line-724"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225045"><a href="#local-6989586621680225045"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#LazyPat"><span class="hs-identifier hs-var">LazyPat</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225045"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-725"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225046"><a href="#local-6989586621680225046"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225046"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-726"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225047"><a href="#local-6989586621680225047"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#AsPat"><span class="hs-identifier hs-var">AsPat</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225047"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-727"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225048"><a href="#local-6989586621680225048"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#ViewPat"><span class="hs-identifier hs-var">ViewPat</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225048"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-728"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225049"><a href="#local-6989586621680225049"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#NPlusKPat"><span class="hs-identifier hs-var">NPlusKPat</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225049"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-729"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225050"><a href="#local-6989586621680225050"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsTypedSplice"><span class="hs-identifier hs-var">HsTypedSplice</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225050"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-730"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225051"><a href="#local-6989586621680225051"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsUntypedSplice"><span class="hs-identifier hs-var">HsUntypedSplice</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225051"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-731"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225052"><a href="#local-6989586621680225052"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsQuasiQuote"><span class="hs-identifier hs-var">HsQuasiQuote</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225000"><span class="hs-identifier hs-var">notInvertible</span></a><span> </span><a href="#local-6989586621680225052"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-732"></a><span>
</span><a name="line-733"></a><span>    </span><a name="local-6989586621680225000"><a href="#local-6989586621680225000"><span class="hs-identifier">notInvertible</span></a></a><span> </span><a name="local-6989586621680225053"><a href="#local-6989586621680225053"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680225001"><span class="hs-identifier hs-var">not_invertible_msg</span></a><span> </span><a href="#local-6989586621680225053"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">)</span><span>
</span><a name="line-734"></a><span>
</span><a name="line-735"></a><span>    </span><a name="local-6989586621680225001"><a href="#local-6989586621680225001"><span class="hs-identifier">not_invertible_msg</span></a></a><span> </span><a name="local-6989586621680225054"><a href="#local-6989586621680225054"><span class="hs-identifier">p</span></a></a><span>
</span><a name="line-736"></a><span>      </span><span class="hs-glyph">=</span><span>   </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Pattern&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225054"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;is not invertible&quot;</span><span>
</span><a name="line-737"></a><span>      </span><a href="Outputable.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a><span> </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Suggestion: instead use an explicitly bidirectional&quot;</span><span>
</span><a name="line-738"></a><span>                </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;pattern synonym, e.g.&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-739"></a><span>             </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;pattern&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680225055"><span class="hs-identifier hs-var">pp_name</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680225056"><span class="hs-identifier hs-var">pp_args</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#larrow"><span class="hs-identifier hs-var">larrow</span></a><span>
</span><a name="line-740"></a><span>                      </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224994"><span class="hs-identifier hs-var">pat</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;where&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-741"></a><span>                   </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680225055"><span class="hs-identifier hs-var">pp_name</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680225056"><span class="hs-identifier hs-var">pp_args</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;...&quot;</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-742"></a><span>      </span><span class="hs-keyword">where</span><span>
</span><a name="line-743"></a><span>        </span><a name="local-6989586621680225055"><a href="#local-6989586621680225055"><span class="hs-identifier">pp_name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224992"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-744"></a><span>        </span><a name="local-6989586621680225056"><a href="#local-6989586621680225056"><span class="hs-identifier">pp_args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680224993"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">)</span><span>
</span><a name="line-745"></a><span>
</span><a name="line-746"></a><span>    </span><span class="hs-comment">-- We should really be able to invert list patterns, even when</span><span>
</span><a name="line-747"></a><span>    </span><span class="hs-comment">-- rebindable syntax is on, but doing so involves a bit of</span><span>
</span><a name="line-748"></a><span>    </span><span class="hs-comment">-- refactoring; see Trac #14380.  Until then we reject with a</span><span>
</span><a name="line-749"></a><span>    </span><span class="hs-comment">-- helpful error message.</span><span>
</span><a name="line-750"></a><span>    </span><a name="local-6989586621680225002"><a href="#local-6989586621680225002"><span class="hs-identifier">notInvertibleListPat</span></a></a><span> </span><a name="local-6989586621680225057"><a href="#local-6989586621680225057"><span class="hs-identifier">p</span></a></a><span>
</span><a name="line-751"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="#local-6989586621680225001"><span class="hs-identifier hs-var">not_invertible_msg</span></a><span> </span><a href="#local-6989586621680225057"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-752"></a><span>                   </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Reason: rebindable syntax is on.&quot;</span><span>
</span><a name="line-753"></a><span>                   </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;This is fixable: add use-case to Trac #14380&quot;</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-754"></a><span>
</span><a name="line-755"></a><span class="hs-comment">{- Note [Builder for a bidirectional pattern synonym]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For a bidirectional pattern synonym we need to produce an /expression/
that matches the supplied /pattern/, given values for the arguments
of the pattern synoymy.  For example
  pattern F x y = (Just x, [y])
The 'builder' for F looks like
  $builderF x y = (Just x, [y])

We can't always do this:
 * Some patterns aren't invertible; e.g. view patterns
      pattern F x = (reverse -&gt; x:_)

 * The RHS pattern might bind more variables than the pattern
   synonym, so again we can't invert it
      pattern F x = (x,y)

 * Ditto wildcards
      pattern F x = (x,_)


Note [Redundant constraints for builder]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The builder can have redundant constraints, which are awkard to eliminate.
Consider
   pattern P = Just 34
To match against this pattern we need (Eq a, Num a).  But to build
(Just 34) we need only (Num a).  Fortunately instTcSigFromId sets
sig_warn_redundant to False.

************************************************************************
*                                                                      *
         Helper functions
*                                                                      *
************************************************************************

Note [As-patterns in pattern synonym definitions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The rationale for rejecting as-patterns in pattern synonym definitions
is that an as-pattern would introduce nonindependent pattern synonym
arguments, e.g. given a pattern synonym like:

        pattern K x y = x@(Just y)

one could write a nonsensical function like

        f (K Nothing x) = ...

or
        g (K (Just True) False) = ...

Note [Type signatures and the builder expression]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
   pattern L x = Left x :: Either [a] [b]

In tc{Infer/Check}PatSynDecl we will check that the pattern has the
specified type.  We check the pattern *as a pattern*, so the type
signature is a pattern signature, and so brings 'a' and 'b' into
scope.  But we don't have a way to bind 'a, b' in the LHS, as we do
'x', say.  Nevertheless, the sigature may be useful to constrain
the type.

When making the binding for the *builder*, though, we don't want
  $buildL x = Left x :: Either [a] [b]
because that wil either mean (forall a b. Either [a] [b]), or we'll
get a complaint that 'a' and 'b' are out of scope. (Actually the
latter; Trac #9867.)  No, the job of the signature is done, so when
converting the pattern to an expression (for the builder RHS) we
simply discard the signature.

Note [Record PatSyn Desugaring]
-------------------------------
It is important that prov_theta comes before req_theta as this ordering is used
when desugaring record pattern synonym updates.

Any change to this ordering should make sure to change deSugar/DsExpr.hs if you
want to avoid difficult to decipher core lint errors!
 -}</span><span>
</span><a name="line-834"></a><span>
</span><a name="line-835"></a><span class="hs-identifier">tcCheckPatSynPat</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-836"></a><a name="tcCheckPatSynPat"><a href="TcPatSyn.html#tcCheckPatSynPat"><span class="hs-identifier">tcCheckPatSynPat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-837"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-838"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-839"></a><span>    </span><a name="local-6989586621680225058"><a href="#local-6989586621680225058"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#addLocM"><span class="hs-identifier hs-var">addLocM</span></a><span> </span><a href="#local-6989586621680225059"><span class="hs-identifier hs-var">go1</span></a><span>
</span><a name="line-840"></a><span>
</span><a name="line-841"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a><span> </span><a href="HsExtension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-842"></a><span>    </span><span class="hs-comment">-- See Note [Bad patterns]</span><span>
</span><a name="line-843"></a><span>    </span><a name="local-6989586621680225059"><a href="#local-6989586621680225059"><span class="hs-identifier">go1</span></a></a><span> </span><a name="local-6989586621680225060"><a href="#local-6989586621680225060"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="HsPat.html#AsPat"><span class="hs-identifier hs-var">AsPat</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#asPatInPatSynErr"><span class="hs-identifier hs-var">asPatInPatSynErr</span></a><span> </span><a href="#local-6989586621680225060"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-844"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225061"><a href="#local-6989586621680225061"><span class="hs-identifier">p</span></a></a><span class="hs-glyph">@</span><a href="HsPat.html#NPlusKPat"><span class="hs-identifier hs-var">NPlusKPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="TcPatSyn.html#nPlusKPatInPatSynErr"><span class="hs-identifier hs-var">nPlusKPatInPatSynErr</span></a><span> </span><a href="#local-6989586621680225061"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-845"></a><span>
</span><a name="line-846"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#ConPatIn"><span class="hs-identifier hs-var">ConPatIn</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225062"><a href="#local-6989586621680225062"><span class="hs-identifier">info</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="HsPat.html#hsConPatArgs"><span class="hs-identifier hs-var">hsConPatArgs</span></a><span> </span><a href="#local-6989586621680225062"><span class="hs-identifier hs-var">info</span></a><span class="hs-special">)</span><span>
</span><a name="line-847"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>            </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-848"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-849"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#LazyPat"><span class="hs-identifier hs-var">LazyPat</span></a><span> </span><a name="local-6989586621680225063"><a href="#local-6989586621680225063"><span class="hs-identifier">pat</span></a></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225063"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-850"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#ParPat"><span class="hs-identifier hs-var">ParPat</span></a><span> </span><a name="local-6989586621680225064"><a href="#local-6989586621680225064"><span class="hs-identifier">pat</span></a></a><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225064"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-851"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#BangPat"><span class="hs-identifier hs-var">BangPat</span></a><span> </span><a name="local-6989586621680225065"><a href="#local-6989586621680225065"><span class="hs-identifier">pat</span></a></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225065"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-852"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#PArrPat"><span class="hs-identifier hs-var">PArrPat</span></a><span> </span><a name="local-6989586621680225066"><a href="#local-6989586621680225066"><span class="hs-identifier">pats</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225066"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-853"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a><span> </span><a name="local-6989586621680225067"><a href="#local-6989586621680225067"><span class="hs-identifier">pats</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225067"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-854"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a><span> </span><a name="local-6989586621680225068"><a href="#local-6989586621680225068"><span class="hs-identifier">pats</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225068"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-855"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#SumPat"><span class="hs-identifier hs-var">SumPat</span></a><span> </span><a name="local-6989586621680225069"><a href="#local-6989586621680225069"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225069"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-856"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#LitPat"><span class="hs-identifier hs-var">LitPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>            </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-857"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#NPat"><span class="hs-identifier hs-var">NPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-858"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#SigPatIn"><span class="hs-identifier hs-var">SigPatIn</span></a><span> </span><a name="local-6989586621680225070"><a href="#local-6989586621680225070"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225070"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-859"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#ViewPat"><span class="hs-identifier hs-var">ViewPat</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225071"><a href="#local-6989586621680225071"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225058"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225071"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-860"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><span class="hs-special">(</span><a href="HsPat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a><span> </span><a name="local-6989586621680225072"><a href="#local-6989586621680225072"><span class="hs-identifier">splice</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-861"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="HsExpr.html#HsSpliced"><span class="hs-identifier hs-var">HsSpliced</span></a><span> </span><a name="local-6989586621680225073"><a href="#local-6989586621680225073"><span class="hs-identifier">mod_finalizers</span></a></a><span> </span><span class="hs-special">(</span><a href="HsExpr.html#HsSplicedPat"><span class="hs-identifier hs-var">HsSplicedPat</span></a><span> </span><a name="local-6989586621680225074"><a href="#local-6989586621680225074"><span class="hs-identifier">pat</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680225072"><span class="hs-identifier hs-var">splice</span></a><span>
</span><a name="line-862"></a><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a href="TcRnMonad.html#addModFinalizersWithLclEnv"><span class="hs-identifier hs-var">addModFinalizersWithLclEnv</span></a><span> </span><a href="#local-6989586621680225073"><span class="hs-identifier hs-var">mod_finalizers</span></a><span>
</span><a name="line-863"></a><span>                                   </span><a href="#local-6989586621680225059"><span class="hs-identifier hs-var">go1</span></a><span> </span><a href="#local-6989586621680225074"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-864"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>             </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;non-pattern from spliced thing&quot;</span><span>
</span><a name="line-865"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#ConPatOut"><span class="hs-identifier hs-var">ConPatOut</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;ConPatOut in output of renamer&quot;</span><span>
</span><a name="line-866"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#SigPatOut"><span class="hs-identifier hs-var">SigPatOut</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;SigPatOut in output of renamer&quot;</span><span>
</span><a name="line-867"></a><span>    </span><span class="hs-identifier">go1</span><span>   </span><a href="HsPat.html#CoPat"><span class="hs-identifier hs-var">CoPat</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>             </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;CoPat in output of renamer&quot;</span><span>
</span><a name="line-868"></a><span>
</span><a name="line-869"></a><span class="hs-identifier">asPatInPatSynErr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="HsExtension.html#SourceTextX"><span class="hs-identifier hs-type">SourceTextX</span></a><span> </span><a href="#local-6989586621680224741"><span class="hs-identifier hs-type">p</span></a><span class="hs-special">,</span><span> </span><a href="HsExtension.html#OutputableBndrId"><span class="hs-identifier hs-type">OutputableBndrId</span></a><span> </span><a href="#local-6989586621680224741"><span class="hs-identifier hs-type">p</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="HsPat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a><span> </span><a href="#local-6989586621680224741"><span class="hs-identifier hs-type">p</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><a href="#local-6989586621680224742"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-870"></a><a name="asPatInPatSynErr"><a href="TcPatSyn.html#asPatInPatSynErr"><span class="hs-identifier">asPatInPatSynErr</span></a></a><span> </span><a name="local-6989586621680225075"><a href="#local-6989586621680225075"><span class="hs-identifier">pat</span></a></a><span>
</span><a name="line-871"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-872"></a><span>    </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Pattern synonym definition cannot contain as-patterns (@):&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-873"></a><span>       </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225075"><span class="hs-identifier hs-var">pat</span></a><span class="hs-special">)</span><span>
</span><a name="line-874"></a><span>
</span><a name="line-875"></a><span class="hs-identifier">nPlusKPatInPatSynErr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="HsExtension.html#SourceTextX"><span class="hs-identifier hs-type">SourceTextX</span></a><span> </span><a href="#local-6989586621680224739"><span class="hs-identifier hs-type">p</span></a><span class="hs-special">,</span><span> </span><a href="HsExtension.html#OutputableBndrId"><span class="hs-identifier hs-type">OutputableBndrId</span></a><span> </span><a href="#local-6989586621680224739"><span class="hs-identifier hs-type">p</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="HsPat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a><span> </span><a href="#local-6989586621680224739"><span class="hs-identifier hs-type">p</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><a href="#local-6989586621680224740"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-876"></a><a name="nPlusKPatInPatSynErr"><a href="TcPatSyn.html#nPlusKPatInPatSynErr"><span class="hs-identifier">nPlusKPatInPatSynErr</span></a></a><span> </span><a name="local-6989586621680225076"><a href="#local-6989586621680225076"><span class="hs-identifier">pat</span></a></a><span>
</span><a name="line-877"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-878"></a><span>    </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Pattern synonym definition cannot contain n+k-pattern:&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-879"></a><span>       </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225076"><span class="hs-identifier hs-var">pat</span></a><span class="hs-special">)</span><span>
</span><a name="line-880"></a><span>
</span><a name="line-881"></a><span class="hs-comment">{- Note [Bad patterns]
~~~~~~~~~~~~~~~~~~~~~~
We don't currently allow as-patterns or n+k patterns in a pattern synonym.
Reason: consider
  pattern P x y = x@(Just y)

What would
  f (P Nothing False) = e
mean?  Presumably something like
  f Nothing@(Just False) = e
But as-patterns don't allow a pattern before the @ sign!  Perhaps they
should -- with p1@p2 meaning match both p1 and p2 -- but they don't
currently.  Hence bannning them in pattern synonyms.  Actually lifting
the restriction would be simple and well-defined.  See Trac #9793.
-}</span><span>
</span><a name="line-896"></a><span>
</span><a name="line-897"></a><span>
</span><a name="line-898"></a><span class="hs-identifier">nonBidirectionalErr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="#local-6989586621680224737"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621680224737"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcM"><span class="hs-identifier hs-type">TcM</span></a><span> </span><a href="#local-6989586621680224738"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-899"></a><a name="nonBidirectionalErr"><a href="TcPatSyn.html#nonBidirectionalErr"><span class="hs-identifier">nonBidirectionalErr</span></a></a><span> </span><a name="local-6989586621680225077"><a href="#local-6989586621680225077"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-900"></a><span>    </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;non-bidirectional pattern synonym&quot;</span><span>
</span><a name="line-901"></a><span>    </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225077"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;used in an expression&quot;</span><span>
</span><a name="line-902"></a><span>
</span><a name="line-903"></a><span class="hs-comment">-- Walk the whole pattern and for all ConPatOuts, collect the</span><span>
</span><a name="line-904"></a><span class="hs-comment">-- existentially-bound type variables and evidence binding variables.</span><span>
</span><a name="line-905"></a><span class="hs-comment">--</span><span>
</span><a name="line-906"></a><span class="hs-comment">-- These are used in computing the type of a pattern synonym and also</span><span>
</span><a name="line-907"></a><span class="hs-comment">-- in generating matcher functions, since success continuations need</span><span>
</span><a name="line-908"></a><span class="hs-comment">-- to be passed these pattern-bound evidences.</span><span>
</span><a name="line-909"></a><span class="hs-identifier">tcCollectEx</span><span>
</span><a name="line-910"></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span>
</span><a name="line-911"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- Existentially-bound type variables</span><span>
</span><a name="line-912"></a><span>                      </span><span class="hs-comment">-- in correctly-scoped order; e.g. [ k:*, x:k ]</span><span>
</span><a name="line-913"></a><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>      </span><span class="hs-comment">-- and evidence variables</span><span>
</span><a name="line-914"></a><span>
</span><a name="line-915"></a><a name="tcCollectEx"><a href="TcPatSyn.html#tcCollectEx"><span class="hs-identifier">tcCollectEx</span></a></a><span> </span><a name="local-6989586621680225078"><a href="#local-6989586621680225078"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225078"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-916"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-917"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-918"></a><span>    </span><a name="local-6989586621680225079"><a href="#local-6989586621680225079"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225080"><span class="hs-identifier hs-var">go1</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span>
</span><a name="line-919"></a><span>
</span><a name="line-920"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-921"></a><span>    </span><a name="local-6989586621680225080"><a href="#local-6989586621680225080"><span class="hs-identifier">go1</span></a></a><span> </span><span class="hs-special">(</span><a href="HsPat.html#LazyPat"><span class="hs-identifier hs-var">LazyPat</span></a><span> </span><a name="local-6989586621680225086"><a href="#local-6989586621680225086"><span class="hs-identifier">p</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225086"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-922"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#AsPat"><span class="hs-identifier hs-var">AsPat</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225087"><a href="#local-6989586621680225087"><span class="hs-identifier">p</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225087"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-923"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#ParPat"><span class="hs-identifier hs-var">ParPat</span></a><span> </span><a name="local-6989586621680225088"><a href="#local-6989586621680225088"><span class="hs-identifier">p</span></a></a><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225088"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-924"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#BangPat"><span class="hs-identifier hs-var">BangPat</span></a><span> </span><a name="local-6989586621680225089"><a href="#local-6989586621680225089"><span class="hs-identifier">p</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225089"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-925"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a><span> </span><a name="local-6989586621680225090"><a href="#local-6989586621680225090"><span class="hs-identifier">ps</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225084"><span class="hs-identifier hs-var">mergeMany</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-6989586621680225090"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-926"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a><span> </span><a name="local-6989586621680225091"><a href="#local-6989586621680225091"><span class="hs-identifier">ps</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225084"><span class="hs-identifier hs-var">mergeMany</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-6989586621680225091"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-927"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SumPat"><span class="hs-identifier hs-var">SumPat</span></a><span> </span><a name="local-6989586621680225092"><a href="#local-6989586621680225092"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225092"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-928"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#PArrPat"><span class="hs-identifier hs-var">PArrPat</span></a><span> </span><a name="local-6989586621680225093"><a href="#local-6989586621680225093"><span class="hs-identifier">ps</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225084"><span class="hs-identifier hs-var">mergeMany</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-6989586621680225093"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-929"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#ViewPat"><span class="hs-identifier hs-var">ViewPat</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225094"><a href="#local-6989586621680225094"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225094"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-930"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><a name="local-6989586621680225095"><a href="#local-6989586621680225095"><span class="hs-identifier">con</span></a></a><span class="hs-glyph">@</span><a href="HsPat.html#ConPatOut"><span class="hs-identifier hs-var">ConPatOut</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225083"><span class="hs-identifier hs-var">merge</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">pat_tvs</span><span> </span><a href="#local-6989586621680225095"><span class="hs-identifier hs-var">con</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">pat_dicts</span><span> </span><a href="#local-6989586621680225095"><span class="hs-identifier hs-var">con</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-931"></a><span>                              </span><a href="#local-6989586621680225081"><span class="hs-identifier hs-var">goConDetails</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-identifier">pat_args</span><span> </span><a href="#local-6989586621680225095"><span class="hs-identifier hs-var">con</span></a><span>
</span><a name="line-932"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#SigPatOut"><span class="hs-identifier hs-var">SigPatOut</span></a><span> </span><a name="local-6989586621680225096"><a href="#local-6989586621680225096"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225096"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-933"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#CoPat"><span class="hs-identifier hs-var">CoPat</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225097"><a href="#local-6989586621680225097"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225080"><span class="hs-identifier hs-var">go1</span></a><span> </span><a href="#local-6989586621680225097"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-934"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-special">(</span><a href="HsPat.html#NPlusKPat"><span class="hs-identifier hs-var">NPlusKPat</span></a><span> </span><a name="local-6989586621680225098"><a href="#local-6989586621680225098"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621680225099"><a href="#local-6989586621680225099"><span class="hs-identifier">k</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680225100"><a href="#local-6989586621680225100"><span class="hs-identifier">geq</span></a></a><span> </span><a name="local-6989586621680225101"><a href="#local-6989586621680225101"><span class="hs-identifier">subtract</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-935"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;TODO: NPlusKPat&quot;</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225098"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225099"><span class="hs-identifier hs-var">k</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225100"><span class="hs-identifier hs-var">geq</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680225101"><span class="hs-identifier hs-var">subtract</span></a><span>
</span><a name="line-936"></a><span>    </span><span class="hs-identifier">go1</span><span> </span><span class="hs-identifier">_</span><span>                   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225085"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-937"></a><span>
</span><a name="line-938"></a><span>    </span><span class="hs-identifier">goConDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-939"></a><span>    </span><a name="local-6989586621680225081"><a href="#local-6989586621680225081"><span class="hs-identifier">goConDetails</span></a></a><span> </span><span class="hs-special">(</span><a href="HsTypes.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a><span> </span><a name="local-6989586621680225102"><a href="#local-6989586621680225102"><span class="hs-identifier">ps</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225084"><span class="hs-identifier hs-var">mergeMany</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-6989586621680225102"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-940"></a><span>    </span><span class="hs-identifier">goConDetails</span><span> </span><span class="hs-special">(</span><a href="HsTypes.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a><span> </span><a name="local-6989586621680225103"><a href="#local-6989586621680225103"><span class="hs-identifier">p1</span></a></a><span> </span><a name="local-6989586621680225104"><a href="#local-6989586621680225104"><span class="hs-identifier">p2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225103"><span class="hs-identifier hs-var">p1</span></a><span> </span><span class="hs-special">`</span><a href="#local-6989586621680225083"><span class="hs-identifier hs-var">merge</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225104"><span class="hs-identifier hs-var">p2</span></a><span>
</span><a name="line-941"></a><span>    </span><span class="hs-identifier">goConDetails</span><span> </span><span class="hs-special">(</span><a href="HsTypes.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a><span> </span><a href="HsPat.html#HsRecFields"><span class="hs-identifier hs-var">HsRecFields</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">rec_flds</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680225105"><a href="#local-6989586621680225105"><span class="hs-identifier">flds</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-942"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225084"><span class="hs-identifier hs-var">mergeMany</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-6989586621680225082"><span class="hs-identifier hs-var">goRecFd</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-6989586621680225105"><span class="hs-identifier hs-var">flds</span></a><span>
</span><a name="line-943"></a><span>
</span><a name="line-944"></a><span>    </span><span class="hs-identifier">goRecFd</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HsPat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span> </span><span class="hs-special">(</span><a href="HsPat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a><span> </span><a href="HsExtension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-945"></a><span>    </span><a name="local-6989586621680225082"><a href="#local-6989586621680225082"><span class="hs-identifier">goRecFd</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a href="HsPat.html#HsRecField"><span class="hs-identifier hs-var">HsRecField</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">hsRecFieldArg</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680225106"><a href="#local-6989586621680225106"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680225079"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621680225106"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-946"></a><span>
</span><a name="line-947"></a><span>    </span><a name="local-6989586621680225083"><a href="#local-6989586621680225083"><span class="hs-identifier">merge</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621680225107"><a href="#local-6989586621680225107"><span class="hs-identifier">vs1</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680225108"><a href="#local-6989586621680225108"><span class="hs-identifier">evs1</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a name="local-6989586621680225109"><a href="#local-6989586621680225109"><span class="hs-identifier">vs2</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621680225110"><a href="#local-6989586621680225110"><span class="hs-identifier">evs2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680225107"><span class="hs-identifier hs-var">vs1</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-6989586621680225109"><span class="hs-identifier hs-var">vs2</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680225108"><span class="hs-identifier hs-var">evs1</span></a><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-6989586621680225110"><span class="hs-identifier hs-var">evs2</span></a><span class="hs-special">)</span><span>
</span><a name="line-948"></a><span>    </span><a name="local-6989586621680225084"><a href="#local-6989586621680225084"><span class="hs-identifier">mergeMany</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.11.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a><span> </span><a href="#local-6989586621680225083"><span class="hs-identifier hs-var">merge</span></a><span> </span><a href="#local-6989586621680225085"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-949"></a><span>    </span><a name="local-6989586621680225085"><a href="#local-6989586621680225085"><span class="hs-identifier">empty</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-950"></a></pre></body></html>